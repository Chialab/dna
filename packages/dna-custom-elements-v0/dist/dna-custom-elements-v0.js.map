{"version":3,"file":"dna-custom-elements-v0.js","sources":["node_modules/@dnajs/core/src/lib/typeof.js","node_modules/@dnajs/core/src/lib/registry.js","node_modules/@dnajs/core/src/lib/symbols.js","node_modules/@dnajs/core/src/lib/dom.js","node_modules/@dnajs/core/src/mixins/component.js","node_modules/@dnajs/core/src/polyfills/custom-event.js","node_modules/@dnajs/core/src/lib/dispatch.js","node_modules/@dnajs/core/src/lib/property.js","node_modules/@dnajs/core/src/mixins/properties-component.js","node_modules/@dnajs/core/src/polyfills/matches.js","node_modules/@dnajs/core/src/mixins/events-component.js","node_modules/@dnajs/core/src/lib/style.js","node_modules/@dnajs/core/src/mixins/style-component.js","node_modules/@dnajs/core/src/mixins/template-component.js","node_modules/@dnajs/core/src/polyfills/reduce.js","node_modules/@dnajs/core/src/lib/mixins.js","node_modules/@dnajs/core/src/lib/shim.js","node_modules/@dnajs/core/src/core.js","node_modules/@dnajs/core/index.js","packages/dna-custom-elements-v0/src/mixins/custom-element.js","packages/dna-custom-elements-v0/index.js"],"sourcesContent":["/**\n * Check if an value is a function.\n * @method isFunction\n * @memberof! DNA.\n * @static\n *\n * @param {*} obj The value to check.\n * @return {Boolean}\n */\nexport function isFunction(obj) {\n    return typeof obj === 'function';\n}\n/**\n * Check if an value is a string.\n * @method isString\n * @memberof! DNA.\n * @static\n *\n * @param {*} obj The value to check.\n * @return {Boolean}\n */\nexport function isString(obj) {\n    return typeof obj === 'string';\n}\n/**\n * Check if an value is an object.\n * @method isObject\n * @memberof! DNA.\n * @static\n *\n * @param {*} obj The value to check.\n * @return {Boolean}\n */\nexport function isObject(obj) {\n    return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Check if an value is undefined.\n * @method isUndefined\n * @memberof! DNA.\n * @static\n *\n * @param {*} obj The value to check.\n * @return {Boolean}\n */\nexport function isUndefined(obj) {\n    return typeof obj === 'undefined';\n}\n/**\n * Check if an value is an array.\n * @method isArray\n * @memberof! DNA.\n * @static\n *\n * @param {*} obj The value to check.\n * @return {Boolean}\n */\nexport function isArray(obj) {\n    return Array.isArray(obj);\n}\n","import { isFunction, isString } from './typeof.js';\n\n/**\n * A custom components registry.\n * It replicates the [CustomElementRegistry interface](https://www.w3.org/TR/custom-elements/#custom-elements-api).\n * @name registry\n * @namespace registry\n * @memberof! DNA.\n * @static\n */\nexport const registry = {\n    /**\n     * The list of defined components.\n     * @type {Object}\n     */\n    components: {},\n    /**\n     * Register a new component.\n     * @param {String} name The id of the component.\n     * @param {Function} Ctr The component constructor.\n     * @param {Object} config Optional component configuration.\n     */\n    define(name, Ctr, config = {}) {\n        this.components[name.toLowerCase()] = {\n            is: name,\n            Ctr,\n            config,\n        };\n    },\n    /**\n     * Retrieve a component descriptor by id.\n     * @private\n     * @param {String} name The component id.\n     * @return {Object} The component descriptor.\n     */\n    getDescriptor(name) {\n        if (isString(name)) {\n            return this.components[name.toLowerCase()];\n        } else if (isFunction(name)) {\n            for (let k in this.components) {\n                let desc = this.components[k];\n                if (desc.Ctr === name) {\n                    return desc;\n                }\n            }\n        }\n    },\n    /**\n     * Retrieve a component constructor by id.\n     * @param {String} name The component id.\n     * @return {Function} The component constructor.\n     */\n    get(name) {\n        let desc = this.getDescriptor(name);\n        if (desc) {\n            return desc.Ctr;\n        }\n    },\n};\n","export const COMPONENT_SYMBOL = '__component';\n","import { isFunction } from './typeof.js';\nimport { registry } from './registry.js';\nimport { COMPONENT_SYMBOL } from './symbols.js';\n\n/**\n * The `connectedCallback` name.\n * @private\n *\n * @type {String}\n * @see [W3C spec](https://www.w3.org/TR/custom-elements/#custom-element-reactions)\n */\nconst CONNECTED = 'connectedCallback';\n/**\n * The `disconnectedCallback` name.\n * @private\n *\n * @type {String}\n * @see [W3C spec](https://www.w3.org/TR/custom-elements/#custom-element-reactions)\n */\nconst DISCONNECTED = 'disconnectedCallback';\n/**\n * The `attributeChangedCallback` name.\n * @private\n *\n * @type {String}\n * @see [W3C spec](https://www.w3.org/TR/custom-elements/#custom-element-reactions)\n */\nconst UPDATED = 'attributeChangedCallback';\n/**\n * Retrieve a component constructor from an Element or from a tag name.\n * @method getComponent\n * @memberof DNA.DOM\n * @static\n *\n * @param {Component|String} element The element or the tag name.\n * @param {Boolean} full Retrieve full component information.\n * @return {Function} The component constructor for the given param.\n */\nexport function getComponent(element, full = false) {\n    if (element.node) {\n        element = element.node;\n    }\n    if (element.nodeType === Node.ELEMENT_NODE) {\n        element = element.getAttribute('is') || element.tagName;\n    }\n    return full ? registry.getDescriptor(element) : registry.get(element);\n}\n/**\n * Check if a node is an instance of a component.\n * @method isComponent\n * @memberof DNA.DOM\n * @static\n *\n * @param {Component} element The element to check.\n * @return {Boolean}\n */\nexport function isComponent(element) {\n    let Ctr = getComponent(element);\n    return Ctr && (element instanceof Ctr);\n}\n/**\n * An helper for dynamically trigger the `connectedCallback` reaction on components.\n * @method connect\n * @memberof DNA.DOM\n * @static\n *\n * @param {Component} element The attached node.\n * @return {Boolean} The callback has been triggered.\n */\nexport function connect(element) {\n    if (isComponent(element)) {\n        element[CONNECTED].call(element);\n        return true;\n    }\n}\n/**\n * An helper for dynamically trigger the `disconnectedCallback` reaction on components.\n * @method disconnect\n * @memberof DNA.DOM\n * @static\n *\n * @param {Component} element The detached node.\n * @return {Boolean} The callback has been triggered.\n */\nexport function disconnect(element) {\n    if (isComponent(element)) {\n        element[DISCONNECTED].call(element);\n        return true;\n    }\n}\n/**\n * An helper for dynamically trigger the `attributeChangedCallback` reaction on components.\n * @method update\n * @memberof DNA.DOM\n * @static\n *\n * @param {Component} element The updated element.\n * @return {Boolean} The callback has been triggered.\n */\nexport function update(element, name, oldValue, newValue) {\n    if (isComponent(element)) {\n        element[UPDATED].call(element, name, oldValue, newValue);\n        return true;\n    }\n}\n/**\n * Attach a component prototype to an already instantiated HTMLElement.\n * @method bind\n * @memberof DNA.DOM\n * @static\n *\n * @param {HTMLElement} node The node to update.\n * @param {Function} Ctr The component class to use (leave empty for auto detect).\n * @return {Boolean} The prototype has been attached.\n */\nexport function bind(node, Ctr) {\n    if (!isFunction(Ctr)) {\n        Ctr = getComponent(node);\n    }\n    if (isFunction(Ctr)) {\n        node.__proto__ = Ctr.prototype;\n        Object.defineProperty(node, 'constructor', {\n            value: Ctr,\n            configurable: true,\n            writable: true,\n        });\n        Ctr.call(node);\n        return true;\n    }\n    return false;\n}\n/**\n * Create a component instance.\n * @method createElement\n * @memberof DNA.DOM\n * @static\n *\n * @param {String} is The component tag name.\n * @return {HTMLElement} The component instance.\n */\nexport function createElement(is) {\n    let Ctr = getComponent(is);\n    if (Ctr) {\n        return new Ctr();\n    }\n}\n/**\n * Dynamically append a node and call the `connectedCallback`.\n * - disconnect the node if already in the tree\n * - connect the node after the insertion\n * @method appendChild\n * @memberof DNA.DOM\n * @static\n *\n * @param {HTMLElement} parent The parent element.\n * @param {Component} element The element to append.\n * @return {Boolean} The node has been appended.\n */\nexport function appendChild(parent, element) {\n    if (element.node) {\n        let node = element.node;\n        if (parent !== node.parentNode || parent.lastElementChild !== node) {\n            if (node.parentNode) {\n                removeChild(node.parentNode, element);\n            }\n            parent.appendChild(node);\n            return connect(element);\n        }\n    }\n    return false;\n}\n/**\n * Dynamically remove a node and call the `disconnectedCallback`.\n * @method removeChild\n * @memberof DNA.DOM\n * @static\n *\n * @param {HTMLElement} parent The parent element.\n * @param {Component} element The element to remove.\n * @return {Boolean} The node has been removed.\n */\nexport function removeChild(parent, element) {\n    if (element.node) {\n        parent.removeChild(element.node);\n        return disconnect(element);\n    }\n}\n/**\n * Dynamically insert a node before another and call all the reactions.\n * - disconnect the node if already in the tree\n * - connect the node after the insertion\n * @method insertBefore\n * @memberof DNA.DOM\n * @static\n *\n * @param {HTMLElement} parent The parent element.\n * @param {Component} element The element to insert.\n * @param {HTMLElement} refNode The node for positioning.\n * @return {Boolean} The node has been appended.\n */\nexport function insertBefore(parent, element, refNode) {\n    if (element.node) {\n        let node = element.node;\n        if (node.nextSibling !== refNode) {\n            if (node.parentNode) {\n                disconnect(element);\n            }\n            parent.insertBefore(node, refNode);\n            return connect(element);\n        }\n    }\n}\n/**\n * Dynamically replace a node with another and call all the reactions.\n * - disconnect the node if already in the tree\n * - disconnect the replaced node\n * - connect the first node after the insertion\n * @method replaceChild\n * @memberof DNA.DOM\n * @static\n *\n * @param {HTMLElement} parent The parent element.\n * @param {Component} element The element to insert.\n * @param {HTMLElement} refNode The node to replace.\n * @return {Boolean} The node has been appended.\n */\nexport function replaceChild(parent, element, refNode) {\n    if (element.node) {\n        let node = element.node;\n        if (node.parentNode) {\n            disconnect(element);\n        }\n        parent.replaceChild(node, refNode);\n        if (refNode[COMPONENT_SYMBOL]) {\n            disconnect(refNode[COMPONENT_SYMBOL]);\n        }\n        return connect(node);\n    }\n}\n/**\n * Dynamically update a node attribute and call all the reactions.\n * @method setAttribute\n * @memberof DNA.DOM\n * @static\n *\n * @param {Component} element The element to update.\n * @param {String} name The attribute name.\n * @param {String} value The attribute value.\n * @return {Boolean} The node has been updated.\n */\nexport function setAttribute(element, name, value) {\n    if (element.node) {\n        let node = element.node;\n        let oldValue = node.getAttribute(name);\n        node.setAttribute(name, value);\n        let attrs = element.constructor.observedAttributes || [];\n        if (attrs.indexOf(name) !== -1) {\n            return update(element, name, oldValue, value);\n        }\n    }\n}\n/**\n * Dynamically remove a node attribute and call all the reactions.\n * @method removeAttribute\n * @memberof DNA.DOM\n * @static\n *\n * @param {Component} element The element to update.\n * @param {String} name The attribute name.\n * @return {Boolean} The node has been updated.\n */\nexport function removeAttribute(element, name) {\n    if (element.node) {\n        let node = element.node;\n        let oldValue = node.getAttribute(name);\n        node.removeAttribute(name);\n        let attrs = element.constructor.observedAttributes || [];\n        if (attrs.indexOf(name) !== -1) {\n            return update(element, name, oldValue, null);\n        }\n    }\n}\n","import { COMPONENT_SYMBOL } from '../lib/symbols.js';\n\n/**\n * THe base custom component mixins. Just add life cycles callback and `is` getter.\n * @mixin ComponentMixin\n * @memberof DNA.MIXINS\n * @static\n */\nexport const ComponentMixin = (SuperClass) => class extends SuperClass {\n    /**\n     * @property {String} is Get component id.\n     * @name is\n     * @type {String}\n     * @memberof DNA.MIXINS.ComponentMixin\n     * @instance\n     */\n    get is() {\n        return (this.getAttribute('is') || this.localName).toLowerCase();\n    }\n    get node() {\n        return this;\n    }\n    /**\n     * Fires when an instance was inserted into the document.\n     * @method connectedCallback\n     * @memberof DNA.MIXINS.ComponentMixin\n     * @instance\n     */\n    connectedCallback() {\n        this.node[COMPONENT_SYMBOL] = this;\n    }\n    /**\n     * Fires when an instance was detached from the document.\n     * @method disconnectedCallback\n     * @memberof DNA.MIXINS.ComponentMixin\n     * @instance\n     */\n    disconnectedCallback() {}\n    /**\n     * Fires when an attribute was added, removed, or updated.\n     * @method attributeChangedCallback\n     * @memberof DNA.MIXINS.ComponentMixin\n     * @instance\n     *\n     * @param {String} attrName The changed attribute name.\n     * @param {String} oldVal The value of the attribute before the change.\n     * @param {String} newVal The value of the attribute after the change.\n     */\n    attributeChangedCallback() {}\n};\n","let CustomEvent;\n\ntry {\n    // eslint-disable-next-line\n    let ev = new self.CustomEvent('test');\n    CustomEvent = self.CustomEvent;\n} catch(ex) {\n    CustomEvent = function(event, params) {\n        params = params || {\n            bubbles: false,\n            cancelable: false,\n            detail: undefined,\n        };\n        let evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n        return evt;\n    };\n    CustomEvent.prototype = self.CustomEvent.prototype;\n}\n\nexport { CustomEvent };\n","import { isString } from './typeof.js';\nimport { CustomEvent } from '../polyfills/custom-event.js';\n\n/**\n * Trigger a custom DOM Event.\n * @private\n *\n * @param {Node} node The event target.\n * @param {String} evName The custom event name.\n * @param {Object} data Extra data to pass to the event.\n * @param {Boolean} bubbles Enable event bubbling.\n * @param {Boolean} cancelable Make event cancelable.\n * @return {Boolean} True if event propagation has not be stopped.\n */\nexport function dispatch(node, evName, data, bubbles = true, cancelable = true) {\n    if (!isString(evName)) {\n        throw new TypeError('Event name is undefined');\n    }\n    let ev = new CustomEvent(evName, {\n        detail: data,\n        bubbles,\n        cancelable,\n    });\n    return node.dispatchEvent(ev);\n}\n","import { isUndefined, isFunction, isArray, isObject, isString } from './typeof.js';\n\n/**\n * Shortcut to `Object.defineProperty`.\n * @type {Function}\n * @private\n */\nconst define = Object.defineProperty;\n\n/**\n * Power to the component's properties.\n * Type checking, validation, callbacks, events and attribute syncing.\n * @private\n */\nclass Property {\n    /**\n     * Create a Property instance.\n     * @param {Function|Array} A single or a list of valid constructors for the property value.\n     * @return {Property}\n     */\n    constructor(ctrs) {\n        this._ = [];\n        ctrs = ctrs || [];\n        if (!isArray(ctrs)) {\n            ctrs = [ctrs];\n        }\n        this.ctrs = ctrs;\n        this.validator = () => true;\n        this._setter = (val) => val;\n        this.getterFn = () => this.value;\n        this.setterFn = (val) => {\n            val = this._setter(val);\n            if ((val === null || val === undefined) ||\n                this.validateType(val) && this.validator(val)) {\n                let oldValue = this.value;\n                if (oldValue !== val) {\n                    this.value = val;\n                    this.changed(val, oldValue);\n                }\n            } else {\n                // eslint-disable-next-line\n                throw new TypeError(\n                    `Invalid \\`${val}\\` value for \\`${this.name}\\` property for \\`${this.scope.is}\\`.`\n                );\n            }\n        };\n    }\n    /**\n     * Add a callback when the property changes.\n     * @param {Function} callback The callback to trigger.\n     * @return {Property} The property instance for chaining.\n     */\n    observe(callback) {\n        if (isFunction(callback) || isString(callback)) {\n            this._.push(callback);\n        }\n        return this;\n    }\n    /**\n     * Remove a callback on property changes.\n     * @param {Function} callback The callback to remove.\n     * @return {Property} The property instance for chaining.\n     */\n    unobserve(callback) {\n        let io = this._.indexOf(callback);\n        if (io !== -1) {\n            this._.splice(io, 1);\n        }\n        return this;\n    }\n    /**\n     * Trigger callbacks after a change.\n     * @private\n     * @param {*} newValue The current property value.\n     * @param {*} oldValue The previous property value.\n     */\n    changed(newValue, oldValue) {\n        for (let i = 0, len = this._.length; i < len; i++) {\n            let clb = this._[i];\n            if (isString(clb)) {\n                this.scope[clb].call(this.scope, this, newValue, oldValue);\n            } else {\n                clb(this, newValue, oldValue);\n            }\n        }\n    }\n    /**\n     * Check if a property accepts a given type as value.\n     * @param {Function} Ctr The constructor for the given type.\n     * @return {Boolean}\n     */\n    accepts(Ctr) {\n        return this.ctrs.indexOf(Ctr) !== -1;\n    }\n    /**\n     * Set the property name.\n     * It also set the attrName if `.attribute` method as been previously\n     * invoked without arguments.\n     * @param {String} name The property name.\n     * @return {Property} The property instance for chaining.\n     */\n    named(name) {\n        this.name = name;\n        if (this.attrRequested === true) {\n            this.attrName = this.name;\n        }\n        return this;\n    }\n    /**\n     * Set the property initial value.\n     * @param {*} initValue The property initial value.\n     * @return {Property} The property instance for chaining.\n     */\n    default(initValue) {\n        this.defaultValue = isObject(initValue) ?\n            Object.freeze(initValue) :\n            initValue;\n        return this;\n    }\n    /**\n     * Set the attribute name to sync.\n     * Invoked without arguments, it retrieve the name of the property.\n     * @param {String} attrName The attribute name.\n     * @return {Property} The property instance for chaining.\n     */\n    attribute(attrName = true) {\n        if (isString(attrName)) {\n            this.attrRequested = false;\n            this.attrName = attrName;\n        } else {\n            this.attrRequested = !!attrName;\n            this.attrName = this.name;\n        }\n        return this;\n    }\n    /**\n     * Add a DOM event name to dispatch on changes.\n     * @param {String} evName The event name.\n     * @return {Property} The property instance for chaining.\n     */\n    dispatch(evName) {\n        this.eventName = evName;\n        return this;\n    }\n    /**\n     * Set a getter function for the property.\n     * By default, the property value will be return.\n     * @param {Function} callback The property getter.\n     * @return {Property} The property instance for chaining.\n     */\n    getter(callback) {\n        if (isFunction(callback)) {\n            this.getterFn = () => callback(this.value);\n        }\n        return this;\n    }\n    /**\n     * Set a setter function for the property.\n     * By default, the property value will be updated with given value\n     * without any modification.\n     * @param {Function} callback The property setter.\n     * @return {Property} The property instance for chaining.\n     */\n    setter(callback) {\n        if (isFunction(callback)) {\n            this._setter = callback;\n        }\n        return this;\n    }\n    /**\n     * Set the property validator.\n     * A validator should return `true` if the value is acceptable\n     * or `false` if unaccaptable.\n     * @param {Function} callback The property validtor.\n     * @return {Property} The property instance for chaining.\n     */\n    validate(callback) {\n        if (isFunction(callback)) {\n            this.validator = callback;\n        }\n        return this;\n    }\n    /**\n     * Check if the given value is a valid type.\n     * @private\n     * @param {*} val The value to check.\n     * @return {Boolean}\n     */\n    validateType(val) {\n        let i = 0;\n        let ctrs = this.ctrs;\n        if (ctrs.length === 0) {\n            return true;\n        }\n        while (i < ctrs.length) {\n            if (val instanceof ctrs[i] || (\n                val.constructor && val.constructor === ctrs[i]\n            )) {\n                return true;\n            }\n            i++;\n        }\n        return false;\n    }\n    /**\n     * Attach the property to a scope (a component instance).\n     * Set the default value if provided.\n     * @param {Object} scope The scope which needs to be bound with the property.\n     */\n    init(scope) {\n        this.scope = scope;\n        define(scope, this.name, {\n            get: this.getterFn.bind(this),\n            set: this.setterFn.bind(this),\n            configurable: true,\n        });\n        if (!isUndefined(this.defaultValue)) {\n            scope[this.name] = this.defaultValue;\n        }\n    }\n}\n\n/**\n * Helper method for Property creation.\n * @method prop\n * @memberof! DNA.\n * @static\n *\n * @property {Property} ANY A property without type validation.\n * @property {Property} STRING A property which accepts only strings.\n * @property {Property} BOOLEAN A property which accepts only booleans.\n * @property {Property} NUMBER A property which accepts only numbers.\n *\n * @param {Property|Function|Array} ctrs A Property to clone or a single or a list of valid constructors for the property value.\n * @return {Property} The new property.\n */\nexport function prop(ctrs) {\n    if (ctrs instanceof Property) {\n        return ctrs;\n    }\n    return new Property(ctrs);\n}\n\n// Define some helpers for default types\ndefine(prop, 'ANY', { get() { return prop(); } });\ndefine(prop, 'STRING', { get() { return prop(String); } });\ndefine(prop, 'BOOLEAN', { get() { return prop(Boolean); } });\ndefine(prop, 'NUMBER', { get() { return prop(Number); } });\n","import { isArray } from '../lib/typeof.js';\nimport { dispatch } from '../lib/dispatch.js';\nimport { isUndefined } from '../lib/typeof.js';\nimport { prop } from '../lib/property.js';\n\n/**\n * Try to parse attribute value checking the property validation types.\n * @private\n *\n * @param {Property} property The property to update.\n * @param {String} attrVal The attribute value.\n * @return {*} The parsed value.\n */\nfunction getValue(property, attrVal) {\n    if (attrVal === '' && property.accepts(Boolean)) {\n        return true;\n    }\n    if (!property.accepts(String)) {\n        try {\n            return JSON.parse(attrVal);\n        } catch (ex) {\n            //\n        }\n    }\n    return attrVal;\n}\n\n/**\n * Set an attribute value checking its type.\n * @private\n *\n * @param {HTMLElement} context The node to update.\n * @param {String} attr The attribute name to update.\n * @param {*} value The value to set.\n */\nfunction setAttribute(context, attr, value) {\n    let currentAttrValue = context.getAttribute(attr);\n    if (currentAttrValue !== value) {\n        if (value !== null && value !== undefined && value !== false) {\n            switch (typeof value) {\n            case 'string':\n            case 'number':\n                context.setAttribute(attr, value);\n                break;\n            case 'boolean':\n                context.setAttribute(attr, '');\n            }\n        } else if (currentAttrValue !== null) {\n            context.removeAttribute(attr);\n        }\n    }\n}\n\n/**\n * Simple Custom Component for properties initialization via attributes.\n * @mixin PropertiesMixin\n * @memberof DNA.MIXINS\n * @static\n *\n * @example\n * ```js\n * // my-component.js\n * import { BaseComponent } from '@dnajs/core';\n * export class MyComponent extends BaseComponent {\n *   get properties() {\n *     return { name: String };\n *   }\n * }\n * ```\n * ```js\n * // app.js\n * import { define } from '@dnajs/core';\n * import { MyComponent } from './my-component.js';\n * define('my-component', MyComponent);\n * var temp = document.createElement('div');\n * temp.innerHTML = '<my-component name=\"Albert\"></my-component>';\n * var element = temp.firstChild;\n * console.log(element.name); // logs \"Albert\"\n * ```\n */\nexport const PropertiesMixin = (SuperClass) => class extends SuperClass {\n    /**\n     * Attach properties on component creation.\n     * @method constructor\n     * @memberof DNA.MIXINS.PropertiesMixin\n     * @instance\n     */\n    constructor() {\n        super();\n        let props = this.properties;\n        if (props) {\n            if (!isArray(props)) {\n                props = [props];\n            }\n            props = props.reduce((res, partialProps) => {\n                for (let k in partialProps) {\n                    res[k] = prop(partialProps[k]);\n                }\n                return res;\n            }, {});\n        } else {\n            props = {};\n        }\n        Object.defineProperty(this, 'properties', {\n            value: props,\n            writable: false,\n            configurable: true,\n        });\n        let observed = this.constructor.observedAttributes || [];\n        for (let k in props) {\n            let prop = props[k];\n            prop.named(k).init(this);\n            let { attrName, eventName } = prop;\n            if (!attrName && observed.indexOf(k) !== -1) {\n                prop.attribute();\n                attrName = k;\n            }\n            if (attrName || eventName) {\n                prop.observe(() => {\n                    if (attrName) {\n                        setAttribute(this.node, attrName, this[prop.name]);\n                    }\n                    if (eventName) {\n                        dispatch(this.node, eventName);\n                    }\n                });\n            }\n        }\n    }\n    /**\n     * Sync initial attributes with properties.\n     * @method connectedCallback\n     * @memberof DNA.MIXINS.PropertiesMixin\n     * @instance\n     */\n    connectedCallback() {\n        super.connectedCallback();\n        let props = this.properties;\n        for (let k in props) {\n            let prop = props[k];\n            let { attrName } = prop;\n            if (attrName) {\n                if (isUndefined(this[prop.name])) {\n                    if (this.node.hasAttribute(attrName)) {\n                        this[prop.name] = getValue(prop, this.node.getAttribute(attrName));\n                    }\n                } else {\n                    setAttribute(this.node, attrName, this[prop.name]);\n                }\n            }\n        }\n    }\n    /**\n     * Sync attributes with properties.\n     * @method attributeChangedCallback\n     * @memberof DNA.MIXINS.PropertiesMixin\n     * @instance\n     *\n     * @param {String} attrName The changed attribute name.\n     * @param {String} oldVal The value of the attribute before the change.\n     * @param {String} newVal The value of the attribute after the change.\n     */\n    attributeChangedCallback(attr, oldVal, newVal) {\n        super.attributeChangedCallback(attr, oldVal, newVal);\n        let props = this.properties;\n        for (let k in props) {\n            let prop = props[k];\n            if (prop.attrName === attr) {\n                this[prop.name] = getValue(prop, newVal);\n                return;\n            }\n        }\n    }\n    /**\n     * Create a listener for node's property changes.\n     * @method observeProperty\n     * @memberof DNA.MIXINS.PropertiesMixin\n     * @instance\n     *\n     * @param {string} propName The property name to observe.\n     * @param {Function} callback The callback to fire.\n     * @return {Object} An object with `cancel` method.\n     */\n    observeProperty(propName, callback) {\n        return this.properties[propName].observe(callback);\n    }\n    /**\n     * Remove a listener for node's property changes.\n     * @method unobserveProperty\n     * @memberof DNA.MIXINS.PropertiesMixin\n     * @instance\n     *\n     * @param {string} propName The property name to unobserve.\n     * @param {Function} callback The callback to remove.\n     */\n    unobserveProperty(propName, callback) {\n        this.properties[propName].unobserve(callback);\n    }\n};\n","const ELEM_PROTO = Element.prototype;\n\nexport const matches = ELEM_PROTO.matches ||\n    ELEM_PROTO.matchesSelector ||\n    ELEM_PROTO.mozMatchesSelector ||\n    ELEM_PROTO.msMatchesSelector ||\n    ELEM_PROTO.oMatchesSelector ||\n    ELEM_PROTO.webkitMatchesSelector;\n","import { isString, isFunction } from '../lib/typeof.js';\nimport { matches } from '../polyfills/matches.js';\nimport { dispatch } from '../lib/dispatch.js';\n\nconst SPLIT_SELECTOR = /([^\\s]+)(.*)?/;\n\n/**\n * Simple Custom Component with events delegation,\n * It also implement a `dispatchEvent` wrapper named `trigger`.\n * @mixin EventsMixin\n * @memberof DNA.MIXINS.\n * @static\n *\n * @example\n * ```js\n * // my-component.js\n * import { BaseComponent } from '@dnajs/core';\n * export class MyComponent extends BaseComponent {\n *   get events() {\n *     return {\n *       'click button': 'onButtonClick'\n *     }\n *   }\n *   onButtonClick() {\n *     console.log('button clicked');\n *   }\n * }\n * ```\n * ```js\n * // app.js\n * import { define } from '@dnajs/core';\n * import { MyComponent } from './my-component.js';\n * define('my-component', MyComponent);\n * var element = new MyComponent();\n * var button = document.createElement('button');\n * button.innerText = 'Click me';\n * element.appendChild(button);\n * button.click(); // logs \"button clicked\"\n * ```\n */\nexport const EventsMixin = (SuperClass) => class extends SuperClass {\n    /**\n     * Attach and delegate events to the component.\n     * @method constructor\n     * @memberof DNA.MIXINS.EventsMixin\n     * @instance\n     */\n    constructor() {\n        super();\n        // bind events\n        let events = this.events || {};\n        for (let k in events) {\n            let callback = isString(events[k]) ?\n                this[events[k]] :\n                events[k];\n            if (isFunction(callback)) {\n                let rule = k.match(SPLIT_SELECTOR);\n                let evName = rule[1];\n                let selector = (rule[2] || '').trim();\n                if (selector) {\n                    this.delegate(evName, selector, callback);\n                } else {\n                    this.node.addEventListener(evName, (ev) => {\n                        callback.call(this, ev, this);\n                    });\n                }\n            } else {\n                throw new TypeError('Invalid callback for event.');\n            }\n        }\n    }\n    /**\n     * Delegate events to the component descendents.\n     * @method delegate\n     * @memberof DNA.MIXINS.EventsMixin\n     * @instance\n     *\n     * @param {String} evName The name of the event to delegate.\n     * @param {String} selector A CSS selector for descendents.\n     * @param {Function} callback The callback to fire when the event fires.\n     */\n    delegate(evName, selector, callback) {\n        this.node.addEventListener(evName, (event) => {\n            let target = event.target;\n            while (target && target !== this) {\n                if (matches.call(target, selector)) {\n                    callback.call(this, event, target);\n                }\n                target = target.parentNode;\n            }\n        });\n    }\n    /**\n     * `Node.prototype.dispatchEvent` wrapper.\n     * @method trigger\n     * @memberof DNA.MIXINS.EventsMixin\n     * @instance\n     *\n     * @param {String} evName The name of the event to fire.\n     * @param {Object} data A set of custom data to pass to the event.\n     * @param {Boolean} bubbles Should the event bubble throw the DOM tree.\n     * @param {Boolean} cancelable Can be the event cancel by a callback.\n     * @return {Boolean} True if event propagation has not be stopped.\n     */\n    trigger(evName, data, bubbles = true, cancelable = true) {\n        return dispatch(this, evName, data, bubbles, cancelable);\n    }\n};\n","const rootDoc = document;\n/**\n * Create and attach a style element for a component.\n * @private\n *\n * @param {HTMLElement} node A component instance.\n * @return {HTMLElement} The created style element.\n */\nexport function createStyle(node) {\n    let doc = node.ownerDocument || rootDoc;\n    let styleElem = doc.createElement('style');\n    styleElem.type = 'text/css';\n    styleElem.setAttribute('id', `style-${node.is}`);\n    let head = doc.head;\n    /* istanbul ignore else */\n    if (head.firstElementChild) {\n        head.insertBefore(styleElem, head.firstElementChild);\n    } else {\n        head.appendChild(styleElem);\n    }\n    return styleElem;\n}\n","import { isString } from '../lib/typeof.js';\nimport { createStyle } from '../lib/style.js';\n\n/**\n * Simple Custom Component with css style handling using the `css` property.\n * @mixin StyleMixin\n * @memberof DNA.MIXINS\n * @static\n *\n * @example\n * ```js\n * // my-component.js\n * import { BaseComponent } from '@dnajs/core';\n * export class MyComponent extends BaseComponent {\n *   get css() {\n *     return '.my-component p { color: red; }'\n *   }\n * }\n * ```\n * ```js\n * // app.js\n * import { define } from '@dnajs/core';\n * import { MyComponent } from './my-component.js';\n * define('my-component', MyComponent);\n * var element = new MyComponent();\n * var p = document.createElement('p');\n * p.innerText = 'Paragraph';\n * element.appendChild(p); // text inside `p` gets the red color\n * ```\n */\nexport const StyleMixin = (SuperClass) => class extends SuperClass {\n    /**\n     * Fires when an instance of the element is created.\n     */\n    constructor() {\n        super();\n        if (!this.constructor.styleElem) {\n            let Ctr = this.constructor;\n            Object.defineProperty(Ctr, 'styleElem', {\n                value: createStyle(this),\n            });\n        }\n        this.updateCSS();\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        this.node.classList.add(this.is);\n    }\n\n    updateCSS() {\n        let style = this.css;\n        if (isString(style)) {\n            this.constructor.styleElem.textContent = style;\n        }\n    }\n};\n","import { isUndefined, isFunction, isString } from '../lib/typeof.js';\n\n/**\n * Simple Custom Component with template handling using the `template` property.\n * @memberof DNA.MIXINS\n * @mixin TemplateMixin\n * @static\n *\n * @param {Function} SuperClass The class to extend.\n * @return {Function} The extended class.\n *\n * @example\n * ```js\n * // my-component.js\n * import { BaseComponent } from '@dnajs/core';\n * export class MyComponent extends BaseComponent {\n *   get template() {\n *     return `<h1>${this.name}</h1>`;\n *   }\n *   get name() {\n *     return 'Newton';\n *   }\n * }\n * ```\n * ```js\n * // app.js\n * import { define } from '@dnajs/core';\n * import { MyComponent } from './my-component.js';\n * define('my-component', MyComponent);\n * var element = new MyComponent();\n * console.log(element.innerHTML); // logs \"<h1>Newton</h1>\"\n * ```\n */\nexport const TemplateMixin = (SuperClass) => class extends SuperClass {\n    get autoRender() {\n        return true;\n    }\n    /**\n     * Attach properties observers in order to update children.\n     * @method constructor\n     * @memberof DNA.MIXINS.TemplateMixin\n     * @instance\n     */\n    constructor() {\n        super();\n        if (this.autoRender && !isUndefined(this.template)) {\n            let props = this.properties;\n            if (props) {\n                let callback = () => {\n                    this.render();\n                };\n                for (let k in props) {\n                    props[k].observe(callback);\n                }\n            }\n        }\n    }\n    /**\n     * Render the component when connected.\n     * @method connectedCallback\n     * @memberof DNA.MIXINS.TemplateMixin\n     * @instance\n     */\n    connectedCallback() {\n        super.connectedCallback();\n        if (!isUndefined(this.template)) {\n            this.render();\n        }\n    }\n    /**\n     * Update Component child nodes.\n     * @method render\n     * @memberof DNA.MIXINS.TemplateMixin\n     * @instance\n     *\n     * @param {Function|string} tpl A template to use instead of `this.template`.\n     *\n     * @throws {TypeError} Will throw if the template type is not supported.\n     */\n    render(tpl) {\n        tpl = tpl || this.template;\n        /* istanbul ignore else */\n        if (isFunction(tpl)) {\n            tpl.call(this);\n        } else if (isString(tpl)) {\n            this.node.innerHTML = tpl;\n        } else {\n            throw new TypeError('Invalid template property.');\n        }\n    }\n};\n","/* eslint-disable prefer-rest-params */\nexport const reduce = Array.prototype.reduce || function(callback /*, initialValue*/ ) {\n    'use strict';\n    let t = this;\n    let len = t.length;\n    let k = 0;\n    let value;\n    if (arguments.length === 2) {\n        value = arguments[1];\n    } else {\n        while (k < len && !(k in t)) {\n            k++;\n        }\n        value = t[k++];\n    }\n    for (; k < len; k++) {\n        if (k in t) {\n            value = callback(value, t[k], k, t);\n        }\n    }\n    return value;\n};\n","/**\n * @author Justin Fagnani\n * @see https://github.com/justinfagnani/mixwith.js\n */\nimport { reduce } from '../polyfills/reduce.js';\n\n/**\n * Mix a class with a mixin.\n * @method mix(...).with(...)\n * @memberof! DNA.\n * @static\n *\n * @param {Function} superClass The class to extend.\n * @return {Function} A mixed class.\n *\n * @example\n * ```js\n * // my-super.js\n * export class MySuperClass {\n *     constructor() {\n *         // do something\n *     }\n * }\n * ```\n * ```js\n * // mixin.js\n * export const Mixin = (superClass) => class extend superClass {\n *     constructor() {\n *         super();\n *         // do something else\n *     }\n * };\n * ```\n * ```js\n * import { mix } from '@dnajs/core';\n * import { MySuperClass } from './my-super.js';\n * import { Mixin } from './mixin.js';\n *\n * export class MixedClass extends mix(MySuperClass).with(Mixin) {\n *     ...\n * }\n * ```\n */\n\n/**\n * A Mixin helper class.\n * @ignore\n */\nclass Mixin {\n    /**\n     * Create a mixable class.\n     * @param {Function} superClass The class to extend.\n     */\n    constructor(superclass) {\n        superclass = superclass || class {};\n        this.superclass = superclass;\n    }\n    /**\n     * Mix the super class with a list of mixins.\n     * @param {...Function} mixins *N* mixin functions.\n     * @return {Function} The extended class.\n     */\n    with() {\n        // eslint-disable-next-line\n        let args = [].slice.call(arguments, 0);\n        return reduce.call(args, (c, mixin) => mixin(c), this.superclass);\n    }\n}\n\n/**\n * Create a Mixin instance.\n * @ignore\n */\nexport const mix = (superClass) => new Mixin(superClass);\n","import { registry } from './registry.js';\nimport { isString } from './typeof.js';\n\n/**\n * Check if a node is already instantiated HTMLElement for programmatically `constructor` calls.\n * @private\n * @param {HTMLElement} node The node to check.\n * @return {Boolean} The node should be instantiated.\n */\nfunction isNew(node) {\n    try {\n        return !isString(node.outerHTML);\n    } catch (ex) {\n        return true;\n    }\n}\n\n/**\n * Shim original Element constructors in order to be used with `new`.\n * @method shim\n * @memberof! DNA.\n * @static\n *\n * @param {Function} Original The original constructor to shim.\n * @return {Function} The shimmed constructor.\n *\n * @example\n * ```js\n * // shim audio element\n * import { shim } from '@dnajs/core';\n *\n * class MyAudio extends shim(HTMLAudioElement) {\n *     ...\n * }\n *\n * let audio = new MyAudio();\n * ```\n */\nexport function shim(Original) {\n    class Polyfilled {\n        constructor() {\n            if (!isNew(this)) {\n                return this;\n            }\n            let desc = registry.getDescriptor(this.constructor);\n            let config = desc.config;\n            // Find the tagname of the constructor and create a new element with it\n            let element = document.createElement(\n                config.extends ? config.extends : desc.is\n            );\n            element.__proto__ = desc.Ctr.prototype;\n            if (config.extends) {\n                element.setAttribute('is', desc.is);\n            }\n            return element;\n        }\n    }\n    // Clone the prototype overriding the constructor.\n    Polyfilled.prototype = Object.create(Original.prototype, {\n        constructor: {\n            value: Polyfilled,\n            configurable: true,\n            writable: true,\n        },\n    });\n    return Polyfilled;\n}\n","import * as DOM_HELPERS from './lib/dom.js';\nimport { ComponentMixin } from './mixins/component.js';\nimport { PropertiesMixin } from './mixins/properties-component.js';\nimport { EventsMixin } from './mixins/events-component.js';\nimport { StyleMixin } from './mixins/style-component.js';\nimport { TemplateMixin } from './mixins/template-component.js';\n\n/**\n * A set of DOM helpers for callbacks trigger when Custom Elements\n * are not supported by the browser.\n * @name DOM\n * @namespace DOM\n * @memberof! DNA.\n * @static\n */\nexport const DOM = DOM_HELPERS;\n/**\n * A set of core mixins.\n * @name MIXINS\n * @namespace MIXINS\n * @memberof! DNA.\n * @static\n */\nexport const MIXINS = {\n    ComponentMixin,\n    PropertiesMixin,\n    EventsMixin,\n    StyleMixin,\n    TemplateMixin,\n};\nexport { mix } from './lib/mixins.js';\nexport { prop } from './lib/property.js';\nexport { shim } from './lib/shim.js';\nexport * from './lib/symbols.js';\nexport * from './lib/typeof.js';\n","/**\n * DNA\n * (c) 2015-2016 Chialab (http://www.chialab.com) <dev@chialab.io>\n * http://dna.chialab.io\n *\n * Just another components pattern.\n * Use with Custom Elements specs.\n */\nimport { mix, prop, shim, DOM, MIXINS } from './src/core.js';\nimport { registry } from './src/lib/registry.js';\n\n/**\n * @namespace DNA\n */\nexport { mix, prop, shim, DOM, MIXINS };\nexport { registry };\n\n/**\n * Register a new component.\n * @method define\n * @memberof! DNA.\n * @static\n *\n * @param {String} name The id of the component.\n * @param {Function} Ctr The component constructor.\n * @param {Object} config Optional component configuration.\n */\nexport function define(tagName, Component, config) {\n    return registry.define(tagName, Component, config);\n}\n/**\n * Create and append a new component instance.\n * @method render\n * @memberof! DNA.\n * @static\n *\n * @param {HTMLElement} node The parent node.\n * @param {Function} Component The component constructor.\n * @param {Object} props Optional set of properties to set to the component.\n * @return {HTMLElement} The new component instance.\n */\nexport function render(node, Component, props) {\n    let element = new Component();\n    for (let k in props) {\n        element[k] = props[k];\n    }\n    DOM.appendChild(node, element);\n    return element;\n}\n\n/**\n * Simple Custom Component with some behaviors.\n * @class BaseComponent\n * @extends HTMLElement\n * @memberof DNA.\n * @static\n *\n * @example\n * ```js\n * // my-component.js\n * import { BaseComponent } from '@dnajs/core';\n * export class MyComponent extends BaseComponent {\n *   static get observedAttributes() {\n *     return ['...', '...'];\n *   }\n *   get css() {\n *     return '...';\n *   }\n *   get events() {\n *     return {\n *       '...': '...'\n *     };\n *   }\n *   get template() {\n *     return '...';\n *   }\n *   get properties() {\n *     return { ... };\n *   }\n * }\n * ```\n */\nexport class BaseComponent extends mix(\n    shim(self.HTMLElement)\n).with(\n    MIXINS.ComponentMixin,\n    MIXINS.PropertiesMixin,\n    MIXINS.StyleMixin,\n    MIXINS.EventsMixin,\n    MIXINS.TemplateMixin\n) {}\n","import { DOM } from '@dnajs/core/src/core.js';\n\nexport const customElementMixin = (superClass) => class extends superClass {\n    createdCallback() {\n        DOM.bind(this);\n    }\n    attachedCallback() {\n        this.connectedCallback();\n    }\n    detachedCallback() {\n        this.detachedCallback();\n    }\n};\n","/**\n * DNA\n * (c) 2015-2016 Chialab (http://www.chialab.com) <dev@chialab.io>\n * http://dna.chialab.io\n *\n * Just another components pattern.\n * Use with Custom Elements v0 spec.\n */\nimport { shim, mix, MIXINS } from '@dnajs/core/src/core.js';\nimport { registry, BaseComponent as OriginalComponent } from '@dnajs/core';\nimport { customElementMixin } from './src/mixins/custom-element.js';\n\nMIXINS.customElementMixin = customElementMixin;\n\nexport { prop } from '@dnajs/core/src/core.js';\nexport { shim, mix, registry, MIXINS };\nexport function define(tagName, Component, config = {}) {\n    registry.define(tagName, Component, config);\n    let opts = {\n        prototype: Component.prototype,\n    };\n    if (config.extends) {\n        opts.extends = config.extends;\n    }\n    return document.registerElement(tagName, opts);\n}\nexport function render(node, Component, props = {}) {\n    let element = new Component();\n    for (let k in props) {\n        element[k] = props[k];\n    }\n    node.appendChild(element);\n    return element;\n}\n\nexport class BaseComponent extends mix(OriginalComponent).with(\n    customElementMixin\n) {}\n"],"names":["isFunction","obj","isString","isObject","Object","prototype","toString","call","isUndefined","isArray","Array","registry","name","Ctr","config","components","toLowerCase","k","desc","getDescriptor","COMPONENT_SYMBOL","CONNECTED","DISCONNECTED","UPDATED","getComponent","element","full","node","nodeType","Node","ELEMENT_NODE","getAttribute","tagName","get","isComponent","connect","disconnect","update","oldValue","newValue","bind","__proto__","defineProperty","createElement","is","appendChild","parent","parentNode","lastElementChild","removeChild","insertBefore","refNode","nextSibling","replaceChild","setAttribute","value","attrs","constructor","observedAttributes","indexOf","removeAttribute","ComponentMixin","SuperClass","connectedCallback","disconnectedCallback","attributeChangedCallback","localName","CustomEvent","ev","self","ex","event","params","undefined","evt","document","createEvent","initCustomEvent","bubbles","cancelable","detail","dispatch","evName","data","TypeError","dispatchEvent","define","Property","ctrs","_","validator","_setter","val","getterFn","setterFn","validateType","changed","scope","observe","callback","push","unobserve","io","splice","i","len","length","clb","accepts","named","attrRequested","attrName","default","initValue","defaultValue","freeze","attribute","eventName","getter","setter","validate","init","prop","String","Boolean","Number","getValue","property","attrVal","JSON","parse","context","attr","currentAttrValue","PropertiesMixin","props","properties","reduce","res","partialProps","observed","hasAttribute","oldVal","newVal","observeProperty","propName","unobserveProperty","ELEM_PROTO","Element","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","SPLIT_SELECTOR","EventsMixin","events","rule","match","selector","trim","delegate","addEventListener","target","trigger","rootDoc","createStyle","doc","ownerDocument","styleElem","type","head","firstElementChild","StyleMixin","updateCSS","classList","add","style","css","textContent","TemplateMixin","autoRender","template","render","tpl","innerHTML","t","arguments","Mixin","superclass","with","args","slice","c","mixin","mix","superClass","isNew","outerHTML","shim","Original","Polyfilled","extends","create","DOM","DOM_HELPERS","MIXINS","BaseComponent","HTMLElement","customElementMixin","createdCallback","attachedCallback","detachedCallback","Component","opts","registerElement","OriginalComponent"],"mappings":"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","preExisting":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BkbmFqcy9jb3JlL3NyYy9saWIvdHlwZW9mLmpzIiwiL1VzZXJzL2Vkb2FyZG9jYXZhenphL1Byb2plY3RzL2RuYS9kbmEtY29tcG9uZW50cy9ub2RlX21vZHVsZXMvQGRuYWpzL2NvcmUvc3JjL2xpYi9yZWdpc3RyeS5qcyIsIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BkbmFqcy9jb3JlL3NyYy9saWIvc3ltYm9scy5qcyIsIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BkbmFqcy9jb3JlL3NyYy9saWIvZG9tLmpzIiwiL1VzZXJzL2Vkb2FyZG9jYXZhenphL1Byb2plY3RzL2RuYS9kbmEtY29tcG9uZW50cy9ub2RlX21vZHVsZXMvQGRuYWpzL2NvcmUvc3JjL21peGlucy9jb21wb25lbnQuanMiLCIvVXNlcnMvZWRvYXJkb2NhdmF6emEvUHJvamVjdHMvZG5hL2RuYS1jb21wb25lbnRzL25vZGVfbW9kdWxlcy9AZG5hanMvY29yZS9zcmMvcG9seWZpbGxzL2N1c3RvbS1ldmVudC5qcyIsIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BkbmFqcy9jb3JlL3NyYy9saWIvZGlzcGF0Y2guanMiLCIvVXNlcnMvZWRvYXJkb2NhdmF6emEvUHJvamVjdHMvZG5hL2RuYS1jb21wb25lbnRzL25vZGVfbW9kdWxlcy9AZG5hanMvY29yZS9zcmMvbGliL3Byb3BlcnR5LmpzIiwiL1VzZXJzL2Vkb2FyZG9jYXZhenphL1Byb2plY3RzL2RuYS9kbmEtY29tcG9uZW50cy9ub2RlX21vZHVsZXMvQGRuYWpzL2NvcmUvc3JjL21peGlucy9wcm9wZXJ0aWVzLWNvbXBvbmVudC5qcyIsIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BkbmFqcy9jb3JlL3NyYy9wb2x5ZmlsbHMvbWF0Y2hlcy5qcyIsIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BkbmFqcy9jb3JlL3NyYy9taXhpbnMvZXZlbnRzLWNvbXBvbmVudC5qcyIsIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BkbmFqcy9jb3JlL3NyYy9saWIvc3R5bGUuanMiLCIvVXNlcnMvZWRvYXJkb2NhdmF6emEvUHJvamVjdHMvZG5hL2RuYS1jb21wb25lbnRzL25vZGVfbW9kdWxlcy9AZG5hanMvY29yZS9zcmMvbWl4aW5zL3N0eWxlLWNvbXBvbmVudC5qcyIsIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BkbmFqcy9jb3JlL3NyYy9taXhpbnMvdGVtcGxhdGUtY29tcG9uZW50LmpzIiwiL1VzZXJzL2Vkb2FyZG9jYXZhenphL1Byb2plY3RzL2RuYS9kbmEtY29tcG9uZW50cy9ub2RlX21vZHVsZXMvQGRuYWpzL2NvcmUvc3JjL3BvbHlmaWxscy9yZWR1Y2UuanMiLCIvVXNlcnMvZWRvYXJkb2NhdmF6emEvUHJvamVjdHMvZG5hL2RuYS1jb21wb25lbnRzL25vZGVfbW9kdWxlcy9AZG5hanMvY29yZS9zcmMvbGliL21peGlucy5qcyIsIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BkbmFqcy9jb3JlL3NyYy9saWIvc2hpbS5qcyIsIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BkbmFqcy9jb3JlL3NyYy9jb3JlLmpzIiwiL1VzZXJzL2Vkb2FyZG9jYXZhenphL1Byb2plY3RzL2RuYS9kbmEtY29tcG9uZW50cy9ub2RlX21vZHVsZXMvQGRuYWpzL2NvcmUvaW5kZXguanMiLCIvVXNlcnMvZWRvYXJkb2NhdmF6emEvUHJvamVjdHMvZG5hL2RuYS1jb21wb25lbnRzL3BhY2thZ2VzL2RuYS1jdXN0b20tZWxlbWVudHMtdjAvc3JjL21peGlucy9jdXN0b20tZWxlbWVudC5qcyIsIi9Vc2Vycy9lZG9hcmRvY2F2YXp6YS9Qcm9qZWN0cy9kbmEvZG5hLWNvbXBvbmVudHMvcGFja2FnZXMvZG5hLWN1c3RvbS1lbGVtZW50cy12MC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENoZWNrIGlmIGFuIHZhbHVlIGlzIGEgZnVuY3Rpb24uXG4gKiBAbWV0aG9kIGlzRnVuY3Rpb25cbiAqIEBtZW1iZXJvZiEgRE5BLlxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7Kn0gb2JqIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nO1xufVxuLyoqXG4gKiBDaGVjayBpZiBhbiB2YWx1ZSBpcyBhIHN0cmluZy5cbiAqIEBtZXRob2QgaXNTdHJpbmdcbiAqIEBtZW1iZXJvZiEgRE5BLlxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7Kn0gb2JqIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyhvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ3N0cmluZyc7XG59XG4vKipcbiAqIENoZWNrIGlmIGFuIHZhbHVlIGlzIGFuIG9iamVjdC5cbiAqIEBtZXRob2QgaXNPYmplY3RcbiAqIEBtZW1iZXJvZiEgRE5BLlxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7Kn0gb2JqIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuLyoqXG4gKiBDaGVjayBpZiBhbiB2YWx1ZSBpcyB1bmRlZmluZWQuXG4gKiBAbWV0aG9kIGlzVW5kZWZpbmVkXG4gKiBAbWVtYmVyb2YhIEROQS5cbiAqIEBzdGF0aWNcbiAqXG4gKiBAcGFyYW0geyp9IG9iaiBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNVbmRlZmluZWQob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnO1xufVxuLyoqXG4gKiBDaGVjayBpZiBhbiB2YWx1ZSBpcyBhbiBhcnJheS5cbiAqIEBtZXRob2QgaXNBcnJheVxuICogQG1lbWJlcm9mISBETkEuXG4gKiBAc3RhdGljXG4gKlxuICogQHBhcmFtIHsqfSBvYmogVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXkob2JqKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkob2JqKTtcbn1cbiIsImltcG9ydCB7IGlzRnVuY3Rpb24sIGlzU3RyaW5nIH0gZnJvbSAnLi90eXBlb2YuanMnO1xuXG4vKipcbiAqIEEgY3VzdG9tIGNvbXBvbmVudHMgcmVnaXN0cnkuXG4gKiBJdCByZXBsaWNhdGVzIHRoZSBbQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5IGludGVyZmFjZV0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2N1c3RvbS1lbGVtZW50cy8jY3VzdG9tLWVsZW1lbnRzLWFwaSkuXG4gKiBAbmFtZSByZWdpc3RyeVxuICogQG5hbWVzcGFjZSByZWdpc3RyeVxuICogQG1lbWJlcm9mISBETkEuXG4gKiBAc3RhdGljXG4gKi9cbmV4cG9ydCBjb25zdCByZWdpc3RyeSA9IHtcbiAgICAvKipcbiAgICAgKiBUaGUgbGlzdCBvZiBkZWZpbmVkIGNvbXBvbmVudHMuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICBjb21wb25lbnRzOiB7fSxcbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIG5ldyBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIGlkIG9mIHRoZSBjb21wb25lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gQ3RyIFRoZSBjb21wb25lbnQgY29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBPcHRpb25hbCBjb21wb25lbnQgY29uZmlndXJhdGlvbi5cbiAgICAgKi9cbiAgICBkZWZpbmUobmFtZSwgQ3RyLCBjb25maWcgPSB7fSkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudHNbbmFtZS50b0xvd2VyQ2FzZSgpXSA9IHtcbiAgICAgICAgICAgIGlzOiBuYW1lLFxuICAgICAgICAgICAgQ3RyLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYSBjb21wb25lbnQgZGVzY3JpcHRvciBieSBpZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBjb21wb25lbnQgaWQuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgY29tcG9uZW50IGRlc2NyaXB0b3IuXG4gICAgICovXG4gICAgZ2V0RGVzY3JpcHRvcihuYW1lKSB7XG4gICAgICAgIGlmIChpc1N0cmluZyhuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50c1tuYW1lLnRvTG93ZXJDYXNlKCldO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24obmFtZSkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGsgaW4gdGhpcy5jb21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRlc2MgPSB0aGlzLmNvbXBvbmVudHNba107XG4gICAgICAgICAgICAgICAgaWYgKGRlc2MuQ3RyID09PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXNjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYSBjb21wb25lbnQgY29uc3RydWN0b3IgYnkgaWQuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIGNvbXBvbmVudCBpZC5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGNvbXBvbmVudCBjb25zdHJ1Y3Rvci5cbiAgICAgKi9cbiAgICBnZXQobmFtZSkge1xuICAgICAgICBsZXQgZGVzYyA9IHRoaXMuZ2V0RGVzY3JpcHRvcihuYW1lKTtcbiAgICAgICAgaWYgKGRlc2MpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjLkN0cjtcbiAgICAgICAgfVxuICAgIH0sXG59O1xuIiwiZXhwb3J0IGNvbnN0IENPTVBPTkVOVF9TWU1CT0wgPSAnX19jb21wb25lbnQnO1xuIiwiaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdHlwZW9mLmpzJztcbmltcG9ydCB7IHJlZ2lzdHJ5IH0gZnJvbSAnLi9yZWdpc3RyeS5qcyc7XG5pbXBvcnQgeyBDT01QT05FTlRfU1lNQk9MIH0gZnJvbSAnLi9zeW1ib2xzLmpzJztcblxuLyoqXG4gKiBUaGUgYGNvbm5lY3RlZENhbGxiYWNrYCBuYW1lLlxuICogQHByaXZhdGVcbiAqXG4gKiBAdHlwZSB7U3RyaW5nfVxuICogQHNlZSBbVzNDIHNwZWNdKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9jdXN0b20tZWxlbWVudHMvI2N1c3RvbS1lbGVtZW50LXJlYWN0aW9ucylcbiAqL1xuY29uc3QgQ09OTkVDVEVEID0gJ2Nvbm5lY3RlZENhbGxiYWNrJztcbi8qKlxuICogVGhlIGBkaXNjb25uZWN0ZWRDYWxsYmFja2AgbmFtZS5cbiAqIEBwcml2YXRlXG4gKlxuICogQHR5cGUge1N0cmluZ31cbiAqIEBzZWUgW1czQyBzcGVjXShodHRwczovL3d3dy53My5vcmcvVFIvY3VzdG9tLWVsZW1lbnRzLyNjdXN0b20tZWxlbWVudC1yZWFjdGlvbnMpXG4gKi9cbmNvbnN0IERJU0NPTk5FQ1RFRCA9ICdkaXNjb25uZWN0ZWRDYWxsYmFjayc7XG4vKipcbiAqIFRoZSBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYCBuYW1lLlxuICogQHByaXZhdGVcbiAqXG4gKiBAdHlwZSB7U3RyaW5nfVxuICogQHNlZSBbVzNDIHNwZWNdKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9jdXN0b20tZWxlbWVudHMvI2N1c3RvbS1lbGVtZW50LXJlYWN0aW9ucylcbiAqL1xuY29uc3QgVVBEQVRFRCA9ICdhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2snO1xuLyoqXG4gKiBSZXRyaWV2ZSBhIGNvbXBvbmVudCBjb25zdHJ1Y3RvciBmcm9tIGFuIEVsZW1lbnQgb3IgZnJvbSBhIHRhZyBuYW1lLlxuICogQG1ldGhvZCBnZXRDb21wb25lbnRcbiAqIEBtZW1iZXJvZiBETkEuRE9NXG4gKiBAc3RhdGljXG4gKlxuICogQHBhcmFtIHtDb21wb25lbnR8U3RyaW5nfSBlbGVtZW50IFRoZSBlbGVtZW50IG9yIHRoZSB0YWcgbmFtZS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZnVsbCBSZXRyaWV2ZSBmdWxsIGNvbXBvbmVudCBpbmZvcm1hdGlvbi5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIGZvciB0aGUgZ2l2ZW4gcGFyYW0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wb25lbnQoZWxlbWVudCwgZnVsbCA9IGZhbHNlKSB7XG4gICAgaWYgKGVsZW1lbnQubm9kZSkge1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5ub2RlO1xuICAgIH1cbiAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpcycpIHx8IGVsZW1lbnQudGFnTmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bGwgPyByZWdpc3RyeS5nZXREZXNjcmlwdG9yKGVsZW1lbnQpIDogcmVnaXN0cnkuZ2V0KGVsZW1lbnQpO1xufVxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgYW4gaW5zdGFuY2Ugb2YgYSBjb21wb25lbnQuXG4gKiBAbWV0aG9kIGlzQ29tcG9uZW50XG4gKiBAbWVtYmVyb2YgRE5BLkRPTVxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7Q29tcG9uZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGNoZWNrLlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ29tcG9uZW50KGVsZW1lbnQpIHtcbiAgICBsZXQgQ3RyID0gZ2V0Q29tcG9uZW50KGVsZW1lbnQpO1xuICAgIHJldHVybiBDdHIgJiYgKGVsZW1lbnQgaW5zdGFuY2VvZiBDdHIpO1xufVxuLyoqXG4gKiBBbiBoZWxwZXIgZm9yIGR5bmFtaWNhbGx5IHRyaWdnZXIgdGhlIGBjb25uZWN0ZWRDYWxsYmFja2AgcmVhY3Rpb24gb24gY29tcG9uZW50cy5cbiAqIEBtZXRob2QgY29ubmVjdFxuICogQG1lbWJlcm9mIEROQS5ET01cbiAqIEBzdGF0aWNcbiAqXG4gKiBAcGFyYW0ge0NvbXBvbmVudH0gZWxlbWVudCBUaGUgYXR0YWNoZWQgbm9kZS5cbiAqIEByZXR1cm4ge0Jvb2xlYW59IFRoZSBjYWxsYmFjayBoYXMgYmVlbiB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25uZWN0KGVsZW1lbnQpIHtcbiAgICBpZiAoaXNDb21wb25lbnQoZWxlbWVudCkpIHtcbiAgICAgICAgZWxlbWVudFtDT05ORUNURURdLmNhbGwoZWxlbWVudCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbi8qKlxuICogQW4gaGVscGVyIGZvciBkeW5hbWljYWxseSB0cmlnZ2VyIHRoZSBgZGlzY29ubmVjdGVkQ2FsbGJhY2tgIHJlYWN0aW9uIG9uIGNvbXBvbmVudHMuXG4gKiBAbWV0aG9kIGRpc2Nvbm5lY3RcbiAqIEBtZW1iZXJvZiBETkEuRE9NXG4gKiBAc3RhdGljXG4gKlxuICogQHBhcmFtIHtDb21wb25lbnR9IGVsZW1lbnQgVGhlIGRldGFjaGVkIG5vZGUuXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUaGUgY2FsbGJhY2sgaGFzIGJlZW4gdHJpZ2dlcmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzY29ubmVjdChlbGVtZW50KSB7XG4gICAgaWYgKGlzQ29tcG9uZW50KGVsZW1lbnQpKSB7XG4gICAgICAgIGVsZW1lbnRbRElTQ09OTkVDVEVEXS5jYWxsKGVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG4vKipcbiAqIEFuIGhlbHBlciBmb3IgZHluYW1pY2FsbHkgdHJpZ2dlciB0aGUgYGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja2AgcmVhY3Rpb24gb24gY29tcG9uZW50cy5cbiAqIEBtZXRob2QgdXBkYXRlXG4gKiBAbWVtYmVyb2YgRE5BLkRPTVxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7Q29tcG9uZW50fSBlbGVtZW50IFRoZSB1cGRhdGVkIGVsZW1lbnQuXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUaGUgY2FsbGJhY2sgaGFzIGJlZW4gdHJpZ2dlcmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlKGVsZW1lbnQsIG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgIGlmIChpc0NvbXBvbmVudChlbGVtZW50KSkge1xuICAgICAgICBlbGVtZW50W1VQREFURURdLmNhbGwoZWxlbWVudCwgbmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuLyoqXG4gKiBBdHRhY2ggYSBjb21wb25lbnQgcHJvdG90eXBlIHRvIGFuIGFscmVhZHkgaW5zdGFudGlhdGVkIEhUTUxFbGVtZW50LlxuICogQG1ldGhvZCBiaW5kXG4gKiBAbWVtYmVyb2YgRE5BLkRPTVxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgVGhlIG5vZGUgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gQ3RyIFRoZSBjb21wb25lbnQgY2xhc3MgdG8gdXNlIChsZWF2ZSBlbXB0eSBmb3IgYXV0byBkZXRlY3QpLlxuICogQHJldHVybiB7Qm9vbGVhbn0gVGhlIHByb3RvdHlwZSBoYXMgYmVlbiBhdHRhY2hlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmQobm9kZSwgQ3RyKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKEN0cikpIHtcbiAgICAgICAgQ3RyID0gZ2V0Q29tcG9uZW50KG5vZGUpO1xuICAgIH1cbiAgICBpZiAoaXNGdW5jdGlvbihDdHIpKSB7XG4gICAgICAgIG5vZGUuX19wcm90b19fID0gQ3RyLnByb3RvdHlwZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5vZGUsICdjb25zdHJ1Y3RvcicsIHtcbiAgICAgICAgICAgIHZhbHVlOiBDdHIsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIEN0ci5jYWxsKG5vZGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBjb21wb25lbnQgaW5zdGFuY2UuXG4gKiBAbWV0aG9kIGNyZWF0ZUVsZW1lbnRcbiAqIEBtZW1iZXJvZiBETkEuRE9NXG4gKiBAc3RhdGljXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlzIFRoZSBjb21wb25lbnQgdGFnIG5hbWUuXG4gKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoaXMpIHtcbiAgICBsZXQgQ3RyID0gZ2V0Q29tcG9uZW50KGlzKTtcbiAgICBpZiAoQ3RyKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ3RyKCk7XG4gICAgfVxufVxuLyoqXG4gKiBEeW5hbWljYWxseSBhcHBlbmQgYSBub2RlIGFuZCBjYWxsIHRoZSBgY29ubmVjdGVkQ2FsbGJhY2tgLlxuICogLSBkaXNjb25uZWN0IHRoZSBub2RlIGlmIGFscmVhZHkgaW4gdGhlIHRyZWVcbiAqIC0gY29ubmVjdCB0aGUgbm9kZSBhZnRlciB0aGUgaW5zZXJ0aW9uXG4gKiBAbWV0aG9kIGFwcGVuZENoaWxkXG4gKiBAbWVtYmVyb2YgRE5BLkRPTVxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudCBUaGUgcGFyZW50IGVsZW1lbnQuXG4gKiBAcGFyYW0ge0NvbXBvbmVudH0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBhcHBlbmQuXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUaGUgbm9kZSBoYXMgYmVlbiBhcHBlbmRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZENoaWxkKHBhcmVudCwgZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50Lm5vZGUpIHtcbiAgICAgICAgbGV0IG5vZGUgPSBlbGVtZW50Lm5vZGU7XG4gICAgICAgIGlmIChwYXJlbnQgIT09IG5vZGUucGFyZW50Tm9kZSB8fCBwYXJlbnQubGFzdEVsZW1lbnRDaGlsZCAhPT0gbm9kZSkge1xuICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkKG5vZGUucGFyZW50Tm9kZSwgZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIER5bmFtaWNhbGx5IHJlbW92ZSBhIG5vZGUgYW5kIGNhbGwgdGhlIGBkaXNjb25uZWN0ZWRDYWxsYmFja2AuXG4gKiBAbWV0aG9kIHJlbW92ZUNoaWxkXG4gKiBAbWVtYmVyb2YgRE5BLkRPTVxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudCBUaGUgcGFyZW50IGVsZW1lbnQuXG4gKiBAcGFyYW0ge0NvbXBvbmVudH0gZWxlbWVudCBUaGUgZWxlbWVudCB0byByZW1vdmUuXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUaGUgbm9kZSBoYXMgYmVlbiByZW1vdmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGQocGFyZW50LCBlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQubm9kZSkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5ub2RlKTtcbiAgICAgICAgcmV0dXJuIGRpc2Nvbm5lY3QoZWxlbWVudCk7XG4gICAgfVxufVxuLyoqXG4gKiBEeW5hbWljYWxseSBpbnNlcnQgYSBub2RlIGJlZm9yZSBhbm90aGVyIGFuZCBjYWxsIGFsbCB0aGUgcmVhY3Rpb25zLlxuICogLSBkaXNjb25uZWN0IHRoZSBub2RlIGlmIGFscmVhZHkgaW4gdGhlIHRyZWVcbiAqIC0gY29ubmVjdCB0aGUgbm9kZSBhZnRlciB0aGUgaW5zZXJ0aW9uXG4gKiBAbWV0aG9kIGluc2VydEJlZm9yZVxuICogQG1lbWJlcm9mIEROQS5ET01cbiAqIEBzdGF0aWNcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBwYXJlbnQgVGhlIHBhcmVudCBlbGVtZW50LlxuICogQHBhcmFtIHtDb21wb25lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gaW5zZXJ0LlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcmVmTm9kZSBUaGUgbm9kZSBmb3IgcG9zaXRpb25pbmcuXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUaGUgbm9kZSBoYXMgYmVlbiBhcHBlbmRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc2VydEJlZm9yZShwYXJlbnQsIGVsZW1lbnQsIHJlZk5vZGUpIHtcbiAgICBpZiAoZWxlbWVudC5ub2RlKSB7XG4gICAgICAgIGxldCBub2RlID0gZWxlbWVudC5ub2RlO1xuICAgICAgICBpZiAobm9kZS5uZXh0U2libGluZyAhPT0gcmVmTm9kZSkge1xuICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3QoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIHJlZk5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3QoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIER5bmFtaWNhbGx5IHJlcGxhY2UgYSBub2RlIHdpdGggYW5vdGhlciBhbmQgY2FsbCBhbGwgdGhlIHJlYWN0aW9ucy5cbiAqIC0gZGlzY29ubmVjdCB0aGUgbm9kZSBpZiBhbHJlYWR5IGluIHRoZSB0cmVlXG4gKiAtIGRpc2Nvbm5lY3QgdGhlIHJlcGxhY2VkIG5vZGVcbiAqIC0gY29ubmVjdCB0aGUgZmlyc3Qgbm9kZSBhZnRlciB0aGUgaW5zZXJ0aW9uXG4gKiBAbWV0aG9kIHJlcGxhY2VDaGlsZFxuICogQG1lbWJlcm9mIEROQS5ET01cbiAqIEBzdGF0aWNcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBwYXJlbnQgVGhlIHBhcmVudCBlbGVtZW50LlxuICogQHBhcmFtIHtDb21wb25lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gaW5zZXJ0LlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcmVmTm9kZSBUaGUgbm9kZSB0byByZXBsYWNlLlxuICogQHJldHVybiB7Qm9vbGVhbn0gVGhlIG5vZGUgaGFzIGJlZW4gYXBwZW5kZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlQ2hpbGQocGFyZW50LCBlbGVtZW50LCByZWZOb2RlKSB7XG4gICAgaWYgKGVsZW1lbnQubm9kZSkge1xuICAgICAgICBsZXQgbm9kZSA9IGVsZW1lbnQubm9kZTtcbiAgICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgZGlzY29ubmVjdChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5vZGUsIHJlZk5vZGUpO1xuICAgICAgICBpZiAocmVmTm9kZVtDT01QT05FTlRfU1lNQk9MXSkge1xuICAgICAgICAgICAgZGlzY29ubmVjdChyZWZOb2RlW0NPTVBPTkVOVF9TWU1CT0xdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29ubmVjdChub2RlKTtcbiAgICB9XG59XG4vKipcbiAqIER5bmFtaWNhbGx5IHVwZGF0ZSBhIG5vZGUgYXR0cmlidXRlIGFuZCBjYWxsIGFsbCB0aGUgcmVhY3Rpb25zLlxuICogQG1ldGhvZCBzZXRBdHRyaWJ1dGVcbiAqIEBtZW1iZXJvZiBETkEuRE9NXG4gKiBAc3RhdGljXG4gKlxuICogQHBhcmFtIHtDb21wb25lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIGF0dHJpYnV0ZSBuYW1lLlxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIFRoZSBhdHRyaWJ1dGUgdmFsdWUuXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUaGUgbm9kZSBoYXMgYmVlbiB1cGRhdGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0QXR0cmlidXRlKGVsZW1lbnQsIG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKGVsZW1lbnQubm9kZSkge1xuICAgICAgICBsZXQgbm9kZSA9IGVsZW1lbnQubm9kZTtcbiAgICAgICAgbGV0IG9sZFZhbHVlID0gbm9kZS5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgbGV0IGF0dHJzID0gZWxlbWVudC5jb25zdHJ1Y3Rvci5vYnNlcnZlZEF0dHJpYnV0ZXMgfHwgW107XG4gICAgICAgIGlmIChhdHRycy5pbmRleE9mKG5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZShlbGVtZW50LCBuYW1lLCBvbGRWYWx1ZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBEeW5hbWljYWxseSByZW1vdmUgYSBub2RlIGF0dHJpYnV0ZSBhbmQgY2FsbCBhbGwgdGhlIHJlYWN0aW9ucy5cbiAqIEBtZXRob2QgcmVtb3ZlQXR0cmlidXRlXG4gKiBAbWVtYmVyb2YgRE5BLkRPTVxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7Q29tcG9uZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBhdHRyaWJ1dGUgbmFtZS5cbiAqIEByZXR1cm4ge0Jvb2xlYW59IFRoZSBub2RlIGhhcyBiZWVuIHVwZGF0ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgbmFtZSkge1xuICAgIGlmIChlbGVtZW50Lm5vZGUpIHtcbiAgICAgICAgbGV0IG5vZGUgPSBlbGVtZW50Lm5vZGU7XG4gICAgICAgIGxldCBvbGRWYWx1ZSA9IG5vZGUuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgbGV0IGF0dHJzID0gZWxlbWVudC5jb25zdHJ1Y3Rvci5vYnNlcnZlZEF0dHJpYnV0ZXMgfHwgW107XG4gICAgICAgIGlmIChhdHRycy5pbmRleE9mKG5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZShlbGVtZW50LCBuYW1lLCBvbGRWYWx1ZSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDT01QT05FTlRfU1lNQk9MIH0gZnJvbSAnLi4vbGliL3N5bWJvbHMuanMnO1xuXG4vKipcbiAqIFRIZSBiYXNlIGN1c3RvbSBjb21wb25lbnQgbWl4aW5zLiBKdXN0IGFkZCBsaWZlIGN5Y2xlcyBjYWxsYmFjayBhbmQgYGlzYCBnZXR0ZXIuXG4gKiBAbWl4aW4gQ29tcG9uZW50TWl4aW5cbiAqIEBtZW1iZXJvZiBETkEuTUlYSU5TXG4gKiBAc3RhdGljXG4gKi9cbmV4cG9ydCBjb25zdCBDb21wb25lbnRNaXhpbiA9IChTdXBlckNsYXNzKSA9PiBjbGFzcyBleHRlbmRzIFN1cGVyQ2xhc3Mge1xuICAgIC8qKlxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBpcyBHZXQgY29tcG9uZW50IGlkLlxuICAgICAqIEBuYW1lIGlzXG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKiBAbWVtYmVyb2YgRE5BLk1JWElOUy5Db21wb25lbnRNaXhpblxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIGdldCBpcygpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmdldEF0dHJpYnV0ZSgnaXMnKSB8fCB0aGlzLmxvY2FsTmFtZSkudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgZ2V0IG5vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXJlcyB3aGVuIGFuIGluc3RhbmNlIHdhcyBpbnNlcnRlZCBpbnRvIHRoZSBkb2N1bWVudC5cbiAgICAgKiBAbWV0aG9kIGNvbm5lY3RlZENhbGxiYWNrXG4gICAgICogQG1lbWJlcm9mIEROQS5NSVhJTlMuQ29tcG9uZW50TWl4aW5cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5ub2RlW0NPTVBPTkVOVF9TWU1CT0xdID0gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlyZXMgd2hlbiBhbiBpbnN0YW5jZSB3YXMgZGV0YWNoZWQgZnJvbSB0aGUgZG9jdW1lbnQuXG4gICAgICogQG1ldGhvZCBkaXNjb25uZWN0ZWRDYWxsYmFja1xuICAgICAqIEBtZW1iZXJvZiBETkEuTUlYSU5TLkNvbXBvbmVudE1peGluXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7fVxuICAgIC8qKlxuICAgICAqIEZpcmVzIHdoZW4gYW4gYXR0cmlidXRlIHdhcyBhZGRlZCwgcmVtb3ZlZCwgb3IgdXBkYXRlZC5cbiAgICAgKiBAbWV0aG9kIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1xuICAgICAqIEBtZW1iZXJvZiBETkEuTUlYSU5TLkNvbXBvbmVudE1peGluXG4gICAgICogQGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYXR0ck5hbWUgVGhlIGNoYW5nZWQgYXR0cmlidXRlIG5hbWUuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9sZFZhbCBUaGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSBiZWZvcmUgdGhlIGNoYW5nZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmV3VmFsIFRoZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIGFmdGVyIHRoZSBjaGFuZ2UuXG4gICAgICovXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKCkge31cbn07XG4iLCJsZXQgQ3VzdG9tRXZlbnQ7XG5cbnRyeSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgbGV0IGV2ID0gbmV3IHNlbGYuQ3VzdG9tRXZlbnQoJ3Rlc3QnKTtcbiAgICBDdXN0b21FdmVudCA9IHNlbGYuQ3VzdG9tRXZlbnQ7XG59IGNhdGNoKGV4KSB7XG4gICAgQ3VzdG9tRXZlbnQgPSBmdW5jdGlvbihldmVudCwgcGFyYW1zKSB7XG4gICAgICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7XG4gICAgICAgICAgICBidWJibGVzOiBmYWxzZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZGV0YWlsOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIGxldCBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICAgICAgZXZ0LmluaXRDdXN0b21FdmVudChldmVudCwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsKTtcbiAgICAgICAgcmV0dXJuIGV2dDtcbiAgICB9O1xuICAgIEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IHNlbGYuQ3VzdG9tRXZlbnQucHJvdG90eXBlO1xufVxuXG5leHBvcnQgeyBDdXN0b21FdmVudCB9O1xuIiwiaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tICcuL3R5cGVvZi5qcyc7XG5pbXBvcnQgeyBDdXN0b21FdmVudCB9IGZyb20gJy4uL3BvbHlmaWxscy9jdXN0b20tZXZlbnQuanMnO1xuXG4vKipcbiAqIFRyaWdnZXIgYSBjdXN0b20gRE9NIEV2ZW50LlxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBldk5hbWUgVGhlIGN1c3RvbSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgRXh0cmEgZGF0YSB0byBwYXNzIHRvIHRoZSBldmVudC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYnViYmxlcyBFbmFibGUgZXZlbnQgYnViYmxpbmcuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGNhbmNlbGFibGUgTWFrZSBldmVudCBjYW5jZWxhYmxlLlxuICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBldmVudCBwcm9wYWdhdGlvbiBoYXMgbm90IGJlIHN0b3BwZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaChub2RlLCBldk5hbWUsIGRhdGEsIGJ1YmJsZXMgPSB0cnVlLCBjYW5jZWxhYmxlID0gdHJ1ZSkge1xuICAgIGlmICghaXNTdHJpbmcoZXZOYW1lKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFdmVudCBuYW1lIGlzIHVuZGVmaW5lZCcpO1xuICAgIH1cbiAgICBsZXQgZXYgPSBuZXcgQ3VzdG9tRXZlbnQoZXZOYW1lLCB7XG4gICAgICAgIGRldGFpbDogZGF0YSxcbiAgICAgICAgYnViYmxlcyxcbiAgICAgICAgY2FuY2VsYWJsZSxcbiAgICB9KTtcbiAgICByZXR1cm4gbm9kZS5kaXNwYXRjaEV2ZW50KGV2KTtcbn1cbiIsImltcG9ydCB7IGlzVW5kZWZpbmVkLCBpc0Z1bmN0aW9uLCBpc0FycmF5LCBpc09iamVjdCwgaXNTdHJpbmcgfSBmcm9tICcuL3R5cGVvZi5qcyc7XG5cbi8qKlxuICogU2hvcnRjdXQgdG8gYE9iamVjdC5kZWZpbmVQcm9wZXJ0eWAuXG4gKiBAdHlwZSB7RnVuY3Rpb259XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBkZWZpbmUgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG5cbi8qKlxuICogUG93ZXIgdG8gdGhlIGNvbXBvbmVudCdzIHByb3BlcnRpZXMuXG4gKiBUeXBlIGNoZWNraW5nLCB2YWxpZGF0aW9uLCBjYWxsYmFja3MsIGV2ZW50cyBhbmQgYXR0cmlidXRlIHN5bmNpbmcuXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBQcm9wZXJ0eSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgUHJvcGVydHkgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheX0gQSBzaW5nbGUgb3IgYSBsaXN0IG9mIHZhbGlkIGNvbnN0cnVjdG9ycyBmb3IgdGhlIHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEByZXR1cm4ge1Byb3BlcnR5fVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGN0cnMpIHtcbiAgICAgICAgdGhpcy5fID0gW107XG4gICAgICAgIGN0cnMgPSBjdHJzIHx8IFtdO1xuICAgICAgICBpZiAoIWlzQXJyYXkoY3RycykpIHtcbiAgICAgICAgICAgIGN0cnMgPSBbY3Ryc107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdHJzID0gY3RycztcbiAgICAgICAgdGhpcy52YWxpZGF0b3IgPSAoKSA9PiB0cnVlO1xuICAgICAgICB0aGlzLl9zZXR0ZXIgPSAodmFsKSA9PiB2YWw7XG4gICAgICAgIHRoaXMuZ2V0dGVyRm4gPSAoKSA9PiB0aGlzLnZhbHVlO1xuICAgICAgICB0aGlzLnNldHRlckZuID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgdmFsID0gdGhpcy5fc2V0dGVyKHZhbCk7XG4gICAgICAgICAgICBpZiAoKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlVHlwZSh2YWwpICYmIHRoaXMudmFsaWRhdG9yKHZhbCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlZCh2YWwsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBJbnZhbGlkIFxcYCR7dmFsfVxcYCB2YWx1ZSBmb3IgXFxgJHt0aGlzLm5hbWV9XFxgIHByb3BlcnR5IGZvciBcXGAke3RoaXMuc2NvcGUuaXN9XFxgLmBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSBjYWxsYmFjayB3aGVuIHRoZSBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byB0cmlnZ2VyLlxuICAgICAqIEByZXR1cm4ge1Byb3BlcnR5fSBUaGUgcHJvcGVydHkgaW5zdGFuY2UgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIG9ic2VydmUoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spIHx8IGlzU3RyaW5nKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgdGhpcy5fLnB1c2goY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBjYWxsYmFjayBvbiBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byByZW1vdmUuXG4gICAgICogQHJldHVybiB7UHJvcGVydHl9IFRoZSBwcm9wZXJ0eSBpbnN0YW5jZSBmb3IgY2hhaW5pbmcuXG4gICAgICovXG4gICAgdW5vYnNlcnZlKGNhbGxiYWNrKSB7XG4gICAgICAgIGxldCBpbyA9IHRoaXMuXy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgaWYgKGlvICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5fLnNwbGljZShpbywgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgY2FsbGJhY2tzIGFmdGVyIGEgY2hhbmdlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBuZXdWYWx1ZSBUaGUgY3VycmVudCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbHVlIFRoZSBwcmV2aW91cyBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgKi9cbiAgICBjaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5fLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2xiID0gdGhpcy5fW2ldO1xuICAgICAgICAgICAgaWYgKGlzU3RyaW5nKGNsYikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3BlW2NsYl0uY2FsbCh0aGlzLnNjb3BlLCB0aGlzLCBuZXdWYWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbGIodGhpcywgbmV3VmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHByb3BlcnR5IGFjY2VwdHMgYSBnaXZlbiB0eXBlIGFzIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IEN0ciBUaGUgY29uc3RydWN0b3IgZm9yIHRoZSBnaXZlbiB0eXBlLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgYWNjZXB0cyhDdHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3Rycy5pbmRleE9mKEN0cikgIT09IC0xO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHByb3BlcnR5IG5hbWUuXG4gICAgICogSXQgYWxzbyBzZXQgdGhlIGF0dHJOYW1lIGlmIGAuYXR0cmlidXRlYCBtZXRob2QgYXMgYmVlbiBwcmV2aW91c2x5XG4gICAgICogaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgcHJvcGVydHkgbmFtZS5cbiAgICAgKiBAcmV0dXJuIHtQcm9wZXJ0eX0gVGhlIHByb3BlcnR5IGluc3RhbmNlIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBuYW1lZChuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIGlmICh0aGlzLmF0dHJSZXF1ZXN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0ck5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcHJvcGVydHkgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9IGluaXRWYWx1ZSBUaGUgcHJvcGVydHkgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtQcm9wZXJ0eX0gVGhlIHByb3BlcnR5IGluc3RhbmNlIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBkZWZhdWx0KGluaXRWYWx1ZSkge1xuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGlzT2JqZWN0KGluaXRWYWx1ZSkgP1xuICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZShpbml0VmFsdWUpIDpcbiAgICAgICAgICAgIGluaXRWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgYXR0cmlidXRlIG5hbWUgdG8gc3luYy5cbiAgICAgKiBJbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBpdCByZXRyaWV2ZSB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGF0dHJOYW1lIFRoZSBhdHRyaWJ1dGUgbmFtZS5cbiAgICAgKiBAcmV0dXJuIHtQcm9wZXJ0eX0gVGhlIHByb3BlcnR5IGluc3RhbmNlIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBhdHRyaWJ1dGUoYXR0ck5hbWUgPSB0cnVlKSB7XG4gICAgICAgIGlmIChpc1N0cmluZyhhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0clJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5hdHRyTmFtZSA9IGF0dHJOYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hdHRyUmVxdWVzdGVkID0gISFhdHRyTmFtZTtcbiAgICAgICAgICAgIHRoaXMuYXR0ck5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIERPTSBldmVudCBuYW1lIHRvIGRpc3BhdGNoIG9uIGNoYW5nZXMuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2TmFtZSBUaGUgZXZlbnQgbmFtZS5cbiAgICAgKiBAcmV0dXJuIHtQcm9wZXJ0eX0gVGhlIHByb3BlcnR5IGluc3RhbmNlIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBkaXNwYXRjaChldk5hbWUpIHtcbiAgICAgICAgdGhpcy5ldmVudE5hbWUgPSBldk5hbWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgYSBnZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSBwcm9wZXJ0eS5cbiAgICAgKiBCeSBkZWZhdWx0LCB0aGUgcHJvcGVydHkgdmFsdWUgd2lsbCBiZSByZXR1cm4uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIHByb3BlcnR5IGdldHRlci5cbiAgICAgKiBAcmV0dXJuIHtQcm9wZXJ0eX0gVGhlIHByb3BlcnR5IGluc3RhbmNlIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICBnZXR0ZXIoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICB0aGlzLmdldHRlckZuID0gKCkgPT4gY2FsbGJhY2sodGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhIHNldHRlciBmdW5jdGlvbiBmb3IgdGhlIHByb3BlcnR5LlxuICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBwcm9wZXJ0eSB2YWx1ZSB3aWxsIGJlIHVwZGF0ZWQgd2l0aCBnaXZlbiB2YWx1ZVxuICAgICAqIHdpdGhvdXQgYW55IG1vZGlmaWNhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgcHJvcGVydHkgc2V0dGVyLlxuICAgICAqIEByZXR1cm4ge1Byb3BlcnR5fSBUaGUgcHJvcGVydHkgaW5zdGFuY2UgZm9yIGNoYWluaW5nLlxuICAgICAqL1xuICAgIHNldHRlcihjYWxsYmFjaykge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldHRlciA9IGNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHByb3BlcnR5IHZhbGlkYXRvci5cbiAgICAgKiBBIHZhbGlkYXRvciBzaG91bGQgcmV0dXJuIGB0cnVlYCBpZiB0aGUgdmFsdWUgaXMgYWNjZXB0YWJsZVxuICAgICAqIG9yIGBmYWxzZWAgaWYgdW5hY2NhcHRhYmxlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBwcm9wZXJ0eSB2YWxpZHRvci5cbiAgICAgKiBAcmV0dXJuIHtQcm9wZXJ0eX0gVGhlIHByb3BlcnR5IGluc3RhbmNlIGZvciBjaGFpbmluZy5cbiAgICAgKi9cbiAgICB2YWxpZGF0ZShjYWxsYmFjaykge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdG9yID0gY2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIHZhbGlkIHR5cGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICB2YWxpZGF0ZVR5cGUodmFsKSB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgbGV0IGN0cnMgPSB0aGlzLmN0cnM7XG4gICAgICAgIGlmIChjdHJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGkgPCBjdHJzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIGN0cnNbaV0gfHwgKFxuICAgICAgICAgICAgICAgIHZhbC5jb25zdHJ1Y3RvciAmJiB2YWwuY29uc3RydWN0b3IgPT09IGN0cnNbaV1cbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaCB0aGUgcHJvcGVydHkgdG8gYSBzY29wZSAoYSBjb21wb25lbnQgaW5zdGFuY2UpLlxuICAgICAqIFNldCB0aGUgZGVmYXVsdCB2YWx1ZSBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2NvcGUgVGhlIHNjb3BlIHdoaWNoIG5lZWRzIHRvIGJlIGJvdW5kIHdpdGggdGhlIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGluaXQoc2NvcGUpIHtcbiAgICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgICAgICBkZWZpbmUoc2NvcGUsIHRoaXMubmFtZSwge1xuICAgICAgICAgICAgZ2V0OiB0aGlzLmdldHRlckZuLmJpbmQodGhpcyksXG4gICAgICAgICAgICBzZXQ6IHRoaXMuc2V0dGVyRm4uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5kZWZhdWx0VmFsdWUpKSB7XG4gICAgICAgICAgICBzY29wZVt0aGlzLm5hbWVdID0gdGhpcy5kZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIG1ldGhvZCBmb3IgUHJvcGVydHkgY3JlYXRpb24uXG4gKiBAbWV0aG9kIHByb3BcbiAqIEBtZW1iZXJvZiEgRE5BLlxuICogQHN0YXRpY1xuICpcbiAqIEBwcm9wZXJ0eSB7UHJvcGVydHl9IEFOWSBBIHByb3BlcnR5IHdpdGhvdXQgdHlwZSB2YWxpZGF0aW9uLlxuICogQHByb3BlcnR5IHtQcm9wZXJ0eX0gU1RSSU5HIEEgcHJvcGVydHkgd2hpY2ggYWNjZXB0cyBvbmx5IHN0cmluZ3MuXG4gKiBAcHJvcGVydHkge1Byb3BlcnR5fSBCT09MRUFOIEEgcHJvcGVydHkgd2hpY2ggYWNjZXB0cyBvbmx5IGJvb2xlYW5zLlxuICogQHByb3BlcnR5IHtQcm9wZXJ0eX0gTlVNQkVSIEEgcHJvcGVydHkgd2hpY2ggYWNjZXB0cyBvbmx5IG51bWJlcnMuXG4gKlxuICogQHBhcmFtIHtQcm9wZXJ0eXxGdW5jdGlvbnxBcnJheX0gY3RycyBBIFByb3BlcnR5IHRvIGNsb25lIG9yIGEgc2luZ2xlIG9yIGEgbGlzdCBvZiB2YWxpZCBjb25zdHJ1Y3RvcnMgZm9yIHRoZSBwcm9wZXJ0eSB2YWx1ZS5cbiAqIEByZXR1cm4ge1Byb3BlcnR5fSBUaGUgbmV3IHByb3BlcnR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvcChjdHJzKSB7XG4gICAgaWYgKGN0cnMgaW5zdGFuY2VvZiBQcm9wZXJ0eSkge1xuICAgICAgICByZXR1cm4gY3RycztcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9wZXJ0eShjdHJzKTtcbn1cblxuLy8gRGVmaW5lIHNvbWUgaGVscGVycyBmb3IgZGVmYXVsdCB0eXBlc1xuZGVmaW5lKHByb3AsICdBTlknLCB7IGdldCgpIHsgcmV0dXJuIHByb3AoKTsgfSB9KTtcbmRlZmluZShwcm9wLCAnU1RSSU5HJywgeyBnZXQoKSB7IHJldHVybiBwcm9wKFN0cmluZyk7IH0gfSk7XG5kZWZpbmUocHJvcCwgJ0JPT0xFQU4nLCB7IGdldCgpIHsgcmV0dXJuIHByb3AoQm9vbGVhbik7IH0gfSk7XG5kZWZpbmUocHJvcCwgJ05VTUJFUicsIHsgZ2V0KCkgeyByZXR1cm4gcHJvcChOdW1iZXIpOyB9IH0pO1xuIiwiaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4uL2xpYi90eXBlb2YuanMnO1xuaW1wb3J0IHsgZGlzcGF0Y2ggfSBmcm9tICcuLi9saWIvZGlzcGF0Y2guanMnO1xuaW1wb3J0IHsgaXNVbmRlZmluZWQgfSBmcm9tICcuLi9saWIvdHlwZW9mLmpzJztcbmltcG9ydCB7IHByb3AgfSBmcm9tICcuLi9saWIvcHJvcGVydHkuanMnO1xuXG4vKipcbiAqIFRyeSB0byBwYXJzZSBhdHRyaWJ1dGUgdmFsdWUgY2hlY2tpbmcgdGhlIHByb3BlcnR5IHZhbGlkYXRpb24gdHlwZXMuXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7UHJvcGVydHl9IHByb3BlcnR5IFRoZSBwcm9wZXJ0eSB0byB1cGRhdGUuXG4gKiBAcGFyYW0ge1N0cmluZ30gYXR0clZhbCBUaGUgYXR0cmlidXRlIHZhbHVlLlxuICogQHJldHVybiB7Kn0gVGhlIHBhcnNlZCB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gZ2V0VmFsdWUocHJvcGVydHksIGF0dHJWYWwpIHtcbiAgICBpZiAoYXR0clZhbCA9PT0gJycgJiYgcHJvcGVydHkuYWNjZXB0cyhCb29sZWFuKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFwcm9wZXJ0eS5hY2NlcHRzKFN0cmluZykpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGF0dHJWYWwpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXR0clZhbDtcbn1cblxuLyoqXG4gKiBTZXQgYW4gYXR0cmlidXRlIHZhbHVlIGNoZWNraW5nIGl0cyB0eXBlLlxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250ZXh0IFRoZSBub2RlIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7U3RyaW5nfSBhdHRyIFRoZSBhdHRyaWJ1dGUgbmFtZSB0byB1cGRhdGUuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKi9cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZShjb250ZXh0LCBhdHRyLCB2YWx1ZSkge1xuICAgIGxldCBjdXJyZW50QXR0clZhbHVlID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoYXR0cik7XG4gICAgaWYgKGN1cnJlbnRBdHRyVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIGNvbnRleHQuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgIGNvbnRleHQuc2V0QXR0cmlidXRlKGF0dHIsICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50QXR0clZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBTaW1wbGUgQ3VzdG9tIENvbXBvbmVudCBmb3IgcHJvcGVydGllcyBpbml0aWFsaXphdGlvbiB2aWEgYXR0cmlidXRlcy5cbiAqIEBtaXhpbiBQcm9wZXJ0aWVzTWl4aW5cbiAqIEBtZW1iZXJvZiBETkEuTUlYSU5TXG4gKiBAc3RhdGljXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiAvLyBteS1jb21wb25lbnQuanNcbiAqIGltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICdAZG5hanMvY29yZSc7XG4gKiBleHBvcnQgY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAqICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gKiAgICAgcmV0dXJuIHsgbmFtZTogU3RyaW5nIH07XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICogYGBganNcbiAqIC8vIGFwcC5qc1xuICogaW1wb3J0IHsgZGVmaW5lIH0gZnJvbSAnQGRuYWpzL2NvcmUnO1xuICogaW1wb3J0IHsgTXlDb21wb25lbnQgfSBmcm9tICcuL215LWNvbXBvbmVudC5qcyc7XG4gKiBkZWZpbmUoJ215LWNvbXBvbmVudCcsIE15Q29tcG9uZW50KTtcbiAqIHZhciB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gKiB0ZW1wLmlubmVySFRNTCA9ICc8bXktY29tcG9uZW50IG5hbWU9XCJBbGJlcnRcIj48L215LWNvbXBvbmVudD4nO1xuICogdmFyIGVsZW1lbnQgPSB0ZW1wLmZpcnN0Q2hpbGQ7XG4gKiBjb25zb2xlLmxvZyhlbGVtZW50Lm5hbWUpOyAvLyBsb2dzIFwiQWxiZXJ0XCJcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgUHJvcGVydGllc01peGluID0gKFN1cGVyQ2xhc3MpID0+IGNsYXNzIGV4dGVuZHMgU3VwZXJDbGFzcyB7XG4gICAgLyoqXG4gICAgICogQXR0YWNoIHByb3BlcnRpZXMgb24gY29tcG9uZW50IGNyZWF0aW9uLlxuICAgICAqIEBtZXRob2QgY29uc3RydWN0b3JcbiAgICAgKiBAbWVtYmVyb2YgRE5BLk1JWElOUy5Qcm9wZXJ0aWVzTWl4aW5cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgbGV0IHByb3BzID0gdGhpcy5wcm9wZXJ0aWVzO1xuICAgICAgICBpZiAocHJvcHMpIHtcbiAgICAgICAgICAgIGlmICghaXNBcnJheShwcm9wcykpIHtcbiAgICAgICAgICAgICAgICBwcm9wcyA9IFtwcm9wc107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9wcyA9IHByb3BzLnJlZHVjZSgocmVzLCBwYXJ0aWFsUHJvcHMpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrIGluIHBhcnRpYWxQcm9wcykge1xuICAgICAgICAgICAgICAgICAgICByZXNba10gPSBwcm9wKHBhcnRpYWxQcm9wc1trXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9wcyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncHJvcGVydGllcycsIHtcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wcyxcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBvYnNlcnZlZCA9IHRoaXMuY29uc3RydWN0b3Iub2JzZXJ2ZWRBdHRyaWJ1dGVzIHx8IFtdO1xuICAgICAgICBmb3IgKGxldCBrIGluIHByb3BzKSB7XG4gICAgICAgICAgICBsZXQgcHJvcCA9IHByb3BzW2tdO1xuICAgICAgICAgICAgcHJvcC5uYW1lZChrKS5pbml0KHRoaXMpO1xuICAgICAgICAgICAgbGV0IHsgYXR0ck5hbWUsIGV2ZW50TmFtZSB9ID0gcHJvcDtcbiAgICAgICAgICAgIGlmICghYXR0ck5hbWUgJiYgb2JzZXJ2ZWQuaW5kZXhPZihrKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBwcm9wLmF0dHJpYnV0ZSgpO1xuICAgICAgICAgICAgICAgIGF0dHJOYW1lID0gaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhdHRyTmFtZSB8fCBldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICBwcm9wLm9ic2VydmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEF0dHJpYnV0ZSh0aGlzLm5vZGUsIGF0dHJOYW1lLCB0aGlzW3Byb3AubmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKHRoaXMubm9kZSwgZXZlbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN5bmMgaW5pdGlhbCBhdHRyaWJ1dGVzIHdpdGggcHJvcGVydGllcy5cbiAgICAgKiBAbWV0aG9kIGNvbm5lY3RlZENhbGxiYWNrXG4gICAgICogQG1lbWJlcm9mIEROQS5NSVhJTlMuUHJvcGVydGllc01peGluXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIGxldCBwcm9wcyA9IHRoaXMucHJvcGVydGllcztcbiAgICAgICAgZm9yIChsZXQgayBpbiBwcm9wcykge1xuICAgICAgICAgICAgbGV0IHByb3AgPSBwcm9wc1trXTtcbiAgICAgICAgICAgIGxldCB7IGF0dHJOYW1lIH0gPSBwcm9wO1xuICAgICAgICAgICAgaWYgKGF0dHJOYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHRoaXNbcHJvcC5uYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubm9kZS5oYXNBdHRyaWJ1dGUoYXR0ck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3Byb3AubmFtZV0gPSBnZXRWYWx1ZShwcm9wLCB0aGlzLm5vZGUuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXRBdHRyaWJ1dGUodGhpcy5ub2RlLCBhdHRyTmFtZSwgdGhpc1twcm9wLm5hbWVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3luYyBhdHRyaWJ1dGVzIHdpdGggcHJvcGVydGllcy5cbiAgICAgKiBAbWV0aG9kIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1xuICAgICAqIEBtZW1iZXJvZiBETkEuTUlYSU5TLlByb3BlcnRpZXNNaXhpblxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGF0dHJOYW1lIFRoZSBjaGFuZ2VkIGF0dHJpYnV0ZSBuYW1lLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvbGRWYWwgVGhlIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgYmVmb3JlIHRoZSBjaGFuZ2UuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5ld1ZhbCBUaGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSBhZnRlciB0aGUgY2hhbmdlLlxuICAgICAqL1xuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyLCBvbGRWYWwsIG5ld1ZhbCkge1xuICAgICAgICBzdXBlci5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0ciwgb2xkVmFsLCBuZXdWYWwpO1xuICAgICAgICBsZXQgcHJvcHMgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICAgIGZvciAobGV0IGsgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgIGxldCBwcm9wID0gcHJvcHNba107XG4gICAgICAgICAgICBpZiAocHJvcC5hdHRyTmFtZSA9PT0gYXR0cikge1xuICAgICAgICAgICAgICAgIHRoaXNbcHJvcC5uYW1lXSA9IGdldFZhbHVlKHByb3AsIG5ld1ZhbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGxpc3RlbmVyIGZvciBub2RlJ3MgcHJvcGVydHkgY2hhbmdlcy5cbiAgICAgKiBAbWV0aG9kIG9ic2VydmVQcm9wZXJ0eVxuICAgICAqIEBtZW1iZXJvZiBETkEuTUlYSU5TLlByb3BlcnRpZXNNaXhpblxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BOYW1lIFRoZSBwcm9wZXJ0eSBuYW1lIHRvIG9ic2VydmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGZpcmUuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBbiBvYmplY3Qgd2l0aCBgY2FuY2VsYCBtZXRob2QuXG4gICAgICovXG4gICAgb2JzZXJ2ZVByb3BlcnR5KHByb3BOYW1lLCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzW3Byb3BOYW1lXS5vYnNlcnZlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgbGlzdGVuZXIgZm9yIG5vZGUncyBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgICAqIEBtZXRob2QgdW5vYnNlcnZlUHJvcGVydHlcbiAgICAgKiBAbWVtYmVyb2YgRE5BLk1JWElOUy5Qcm9wZXJ0aWVzTWl4aW5cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wTmFtZSBUaGUgcHJvcGVydHkgbmFtZSB0byB1bm9ic2VydmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIHJlbW92ZS5cbiAgICAgKi9cbiAgICB1bm9ic2VydmVQcm9wZXJ0eShwcm9wTmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzW3Byb3BOYW1lXS51bm9ic2VydmUoY2FsbGJhY2spO1xuICAgIH1cbn07XG4iLCJjb25zdCBFTEVNX1BST1RPID0gRWxlbWVudC5wcm90b3R5cGU7XG5cbmV4cG9ydCBjb25zdCBtYXRjaGVzID0gRUxFTV9QUk9UTy5tYXRjaGVzIHx8XG4gICAgRUxFTV9QUk9UTy5tYXRjaGVzU2VsZWN0b3IgfHxcbiAgICBFTEVNX1BST1RPLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuICAgIEVMRU1fUFJPVE8ubXNNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICBFTEVNX1BST1RPLm9NYXRjaGVzU2VsZWN0b3IgfHxcbiAgICBFTEVNX1BST1RPLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcbiIsImltcG9ydCB7IGlzU3RyaW5nLCBpc0Z1bmN0aW9uIH0gZnJvbSAnLi4vbGliL3R5cGVvZi5qcyc7XG5pbXBvcnQgeyBtYXRjaGVzIH0gZnJvbSAnLi4vcG9seWZpbGxzL21hdGNoZXMuanMnO1xuaW1wb3J0IHsgZGlzcGF0Y2ggfSBmcm9tICcuLi9saWIvZGlzcGF0Y2guanMnO1xuXG5jb25zdCBTUExJVF9TRUxFQ1RPUiA9IC8oW15cXHNdKykoLiopPy87XG5cbi8qKlxuICogU2ltcGxlIEN1c3RvbSBDb21wb25lbnQgd2l0aCBldmVudHMgZGVsZWdhdGlvbixcbiAqIEl0IGFsc28gaW1wbGVtZW50IGEgYGRpc3BhdGNoRXZlbnRgIHdyYXBwZXIgbmFtZWQgYHRyaWdnZXJgLlxuICogQG1peGluIEV2ZW50c01peGluXG4gKiBAbWVtYmVyb2YgRE5BLk1JWElOUy5cbiAqIEBzdGF0aWNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBganNcbiAqIC8vIG15LWNvbXBvbmVudC5qc1xuICogaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJ0BkbmFqcy9jb3JlJztcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICogICBnZXQgZXZlbnRzKCkge1xuICogICAgIHJldHVybiB7XG4gKiAgICAgICAnY2xpY2sgYnV0dG9uJzogJ29uQnV0dG9uQ2xpY2snXG4gKiAgICAgfVxuICogICB9XG4gKiAgIG9uQnV0dG9uQ2xpY2soKSB7XG4gKiAgICAgY29uc29sZS5sb2coJ2J1dHRvbiBjbGlja2VkJyk7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICogYGBganNcbiAqIC8vIGFwcC5qc1xuICogaW1wb3J0IHsgZGVmaW5lIH0gZnJvbSAnQGRuYWpzL2NvcmUnO1xuICogaW1wb3J0IHsgTXlDb21wb25lbnQgfSBmcm9tICcuL215LWNvbXBvbmVudC5qcyc7XG4gKiBkZWZpbmUoJ215LWNvbXBvbmVudCcsIE15Q29tcG9uZW50KTtcbiAqIHZhciBlbGVtZW50ID0gbmV3IE15Q29tcG9uZW50KCk7XG4gKiB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gKiBidXR0b24uaW5uZXJUZXh0ID0gJ0NsaWNrIG1lJztcbiAqIGVsZW1lbnQuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAqIGJ1dHRvbi5jbGljaygpOyAvLyBsb2dzIFwiYnV0dG9uIGNsaWNrZWRcIlxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBFdmVudHNNaXhpbiA9IChTdXBlckNsYXNzKSA9PiBjbGFzcyBleHRlbmRzIFN1cGVyQ2xhc3Mge1xuICAgIC8qKlxuICAgICAqIEF0dGFjaCBhbmQgZGVsZWdhdGUgZXZlbnRzIHRvIHRoZSBjb21wb25lbnQuXG4gICAgICogQG1ldGhvZCBjb25zdHJ1Y3RvclxuICAgICAqIEBtZW1iZXJvZiBETkEuTUlYSU5TLkV2ZW50c01peGluXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIC8vIGJpbmQgZXZlbnRzXG4gICAgICAgIGxldCBldmVudHMgPSB0aGlzLmV2ZW50cyB8fCB7fTtcbiAgICAgICAgZm9yIChsZXQgayBpbiBldmVudHMpIHtcbiAgICAgICAgICAgIGxldCBjYWxsYmFjayA9IGlzU3RyaW5nKGV2ZW50c1trXSkgP1xuICAgICAgICAgICAgICAgIHRoaXNbZXZlbnRzW2tdXSA6XG4gICAgICAgICAgICAgICAgZXZlbnRzW2tdO1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBrLm1hdGNoKFNQTElUX1NFTEVDVE9SKTtcbiAgICAgICAgICAgICAgICBsZXQgZXZOYW1lID0gcnVsZVsxXTtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0b3IgPSAocnVsZVsyXSB8fCAnJykudHJpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlKGV2TmFtZSwgc2VsZWN0b3IsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldk5hbWUsIChldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCBldiwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjYWxsYmFjayBmb3IgZXZlbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZWdhdGUgZXZlbnRzIHRvIHRoZSBjb21wb25lbnQgZGVzY2VuZGVudHMuXG4gICAgICogQG1ldGhvZCBkZWxlZ2F0ZVxuICAgICAqIEBtZW1iZXJvZiBETkEuTUlYSU5TLkV2ZW50c01peGluXG4gICAgICogQGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZOYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byBkZWxlZ2F0ZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3IgQSBDU1Mgc2VsZWN0b3IgZm9yIGRlc2NlbmRlbnRzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBmaXJlIHdoZW4gdGhlIGV2ZW50IGZpcmVzLlxuICAgICAqL1xuICAgIGRlbGVnYXRlKGV2TmFtZSwgc2VsZWN0b3IsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKGV2TmFtZSwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgd2hpbGUgKHRhcmdldCAmJiB0YXJnZXQgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcy5jYWxsKHRhcmdldCwgc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcywgZXZlbnQsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogYE5vZGUucHJvdG90eXBlLmRpc3BhdGNoRXZlbnRgIHdyYXBwZXIuXG4gICAgICogQG1ldGhvZCB0cmlnZ2VyXG4gICAgICogQG1lbWJlcm9mIEROQS5NSVhJTlMuRXZlbnRzTWl4aW5cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldk5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIGZpcmUuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgQSBzZXQgb2YgY3VzdG9tIGRhdGEgdG8gcGFzcyB0byB0aGUgZXZlbnQuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBidWJibGVzIFNob3VsZCB0aGUgZXZlbnQgYnViYmxlIHRocm93IHRoZSBET00gdHJlZS5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGNhbmNlbGFibGUgQ2FuIGJlIHRoZSBldmVudCBjYW5jZWwgYnkgYSBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIGV2ZW50IHByb3BhZ2F0aW9uIGhhcyBub3QgYmUgc3RvcHBlZC5cbiAgICAgKi9cbiAgICB0cmlnZ2VyKGV2TmFtZSwgZGF0YSwgYnViYmxlcyA9IHRydWUsIGNhbmNlbGFibGUgPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBkaXNwYXRjaCh0aGlzLCBldk5hbWUsIGRhdGEsIGJ1YmJsZXMsIGNhbmNlbGFibGUpO1xuICAgIH1cbn07XG4iLCJjb25zdCByb290RG9jID0gZG9jdW1lbnQ7XG4vKipcbiAqIENyZWF0ZSBhbmQgYXR0YWNoIGEgc3R5bGUgZWxlbWVudCBmb3IgYSBjb21wb25lbnQuXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgQSBjb21wb25lbnQgaW5zdGFuY2UuXG4gKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIGNyZWF0ZWQgc3R5bGUgZWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0eWxlKG5vZGUpIHtcbiAgICBsZXQgZG9jID0gbm9kZS5vd25lckRvY3VtZW50IHx8IHJvb3REb2M7XG4gICAgbGV0IHN0eWxlRWxlbSA9IGRvYy5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWxlbS50eXBlID0gJ3RleHQvY3NzJztcbiAgICBzdHlsZUVsZW0uc2V0QXR0cmlidXRlKCdpZCcsIGBzdHlsZS0ke25vZGUuaXN9YCk7XG4gICAgbGV0IGhlYWQgPSBkb2MuaGVhZDtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmIChoZWFkLmZpcnN0RWxlbWVudENoaWxkKSB7XG4gICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbSwgaGVhZC5maXJzdEVsZW1lbnRDaGlsZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW0pO1xuICAgIH1cbiAgICByZXR1cm4gc3R5bGVFbGVtO1xufVxuIiwiaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tICcuLi9saWIvdHlwZW9mLmpzJztcbmltcG9ydCB7IGNyZWF0ZVN0eWxlIH0gZnJvbSAnLi4vbGliL3N0eWxlLmpzJztcblxuLyoqXG4gKiBTaW1wbGUgQ3VzdG9tIENvbXBvbmVudCB3aXRoIGNzcyBzdHlsZSBoYW5kbGluZyB1c2luZyB0aGUgYGNzc2AgcHJvcGVydHkuXG4gKiBAbWl4aW4gU3R5bGVNaXhpblxuICogQG1lbWJlcm9mIEROQS5NSVhJTlNcbiAqIEBzdGF0aWNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBganNcbiAqIC8vIG15LWNvbXBvbmVudC5qc1xuICogaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJ0BkbmFqcy9jb3JlJztcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICogICBnZXQgY3NzKCkge1xuICogICAgIHJldHVybiAnLm15LWNvbXBvbmVudCBwIHsgY29sb3I6IHJlZDsgfSdcbiAqICAgfVxuICogfVxuICogYGBgXG4gKiBgYGBqc1xuICogLy8gYXBwLmpzXG4gKiBpbXBvcnQgeyBkZWZpbmUgfSBmcm9tICdAZG5hanMvY29yZSc7XG4gKiBpbXBvcnQgeyBNeUNvbXBvbmVudCB9IGZyb20gJy4vbXktY29tcG9uZW50LmpzJztcbiAqIGRlZmluZSgnbXktY29tcG9uZW50JywgTXlDb21wb25lbnQpO1xuICogdmFyIGVsZW1lbnQgPSBuZXcgTXlDb21wb25lbnQoKTtcbiAqIHZhciBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICogcC5pbm5lclRleHQgPSAnUGFyYWdyYXBoJztcbiAqIGVsZW1lbnQuYXBwZW5kQ2hpbGQocCk7IC8vIHRleHQgaW5zaWRlIGBwYCBnZXRzIHRoZSByZWQgY29sb3JcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgU3R5bGVNaXhpbiA9IChTdXBlckNsYXNzKSA9PiBjbGFzcyBleHRlbmRzIFN1cGVyQ2xhc3Mge1xuICAgIC8qKlxuICAgICAqIEZpcmVzIHdoZW4gYW4gaW5zdGFuY2Ugb2YgdGhlIGVsZW1lbnQgaXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnN0cnVjdG9yLnN0eWxlRWxlbSkge1xuICAgICAgICAgICAgbGV0IEN0ciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ3RyLCAnc3R5bGVFbGVtJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBjcmVhdGVTdHlsZSh0aGlzKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlQ1NTKCk7XG4gICAgfVxuXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMubm9kZS5jbGFzc0xpc3QuYWRkKHRoaXMuaXMpO1xuICAgIH1cblxuICAgIHVwZGF0ZUNTUygpIHtcbiAgICAgICAgbGV0IHN0eWxlID0gdGhpcy5jc3M7XG4gICAgICAgIGlmIChpc1N0cmluZyhzdHlsZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3Iuc3R5bGVFbGVtLnRleHRDb250ZW50ID0gc3R5bGU7XG4gICAgICAgIH1cbiAgICB9XG59O1xuIiwiaW1wb3J0IHsgaXNVbmRlZmluZWQsIGlzRnVuY3Rpb24sIGlzU3RyaW5nIH0gZnJvbSAnLi4vbGliL3R5cGVvZi5qcyc7XG5cbi8qKlxuICogU2ltcGxlIEN1c3RvbSBDb21wb25lbnQgd2l0aCB0ZW1wbGF0ZSBoYW5kbGluZyB1c2luZyB0aGUgYHRlbXBsYXRlYCBwcm9wZXJ0eS5cbiAqIEBtZW1iZXJvZiBETkEuTUlYSU5TXG4gKiBAbWl4aW4gVGVtcGxhdGVNaXhpblxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFN1cGVyQ2xhc3MgVGhlIGNsYXNzIHRvIGV4dGVuZC5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgZXh0ZW5kZWQgY2xhc3MuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiAvLyBteS1jb21wb25lbnQuanNcbiAqIGltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICdAZG5hanMvY29yZSc7XG4gKiBleHBvcnQgY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAqICAgZ2V0IHRlbXBsYXRlKCkge1xuICogICAgIHJldHVybiBgPGgxPiR7dGhpcy5uYW1lfTwvaDE+YDtcbiAqICAgfVxuICogICBnZXQgbmFtZSgpIHtcbiAqICAgICByZXR1cm4gJ05ld3Rvbic7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICogYGBganNcbiAqIC8vIGFwcC5qc1xuICogaW1wb3J0IHsgZGVmaW5lIH0gZnJvbSAnQGRuYWpzL2NvcmUnO1xuICogaW1wb3J0IHsgTXlDb21wb25lbnQgfSBmcm9tICcuL215LWNvbXBvbmVudC5qcyc7XG4gKiBkZWZpbmUoJ215LWNvbXBvbmVudCcsIE15Q29tcG9uZW50KTtcbiAqIHZhciBlbGVtZW50ID0gbmV3IE15Q29tcG9uZW50KCk7XG4gKiBjb25zb2xlLmxvZyhlbGVtZW50LmlubmVySFRNTCk7IC8vIGxvZ3MgXCI8aDE+TmV3dG9uPC9oMT5cIlxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBUZW1wbGF0ZU1peGluID0gKFN1cGVyQ2xhc3MpID0+IGNsYXNzIGV4dGVuZHMgU3VwZXJDbGFzcyB7XG4gICAgZ2V0IGF1dG9SZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2ggcHJvcGVydGllcyBvYnNlcnZlcnMgaW4gb3JkZXIgdG8gdXBkYXRlIGNoaWxkcmVuLlxuICAgICAqIEBtZXRob2QgY29uc3RydWN0b3JcbiAgICAgKiBAbWVtYmVyb2YgRE5BLk1JWElOUy5UZW1wbGF0ZU1peGluXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmICh0aGlzLmF1dG9SZW5kZXIgJiYgIWlzVW5kZWZpbmVkKHRoaXMudGVtcGxhdGUpKSB7XG4gICAgICAgICAgICBsZXQgcHJvcHMgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBpZiAocHJvcHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgY2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrIGluIHByb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzW2tdLm9ic2VydmUoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIGNvbXBvbmVudCB3aGVuIGNvbm5lY3RlZC5cbiAgICAgKiBAbWV0aG9kIGNvbm5lY3RlZENhbGxiYWNrXG4gICAgICogQG1lbWJlcm9mIEROQS5NSVhJTlMuVGVtcGxhdGVNaXhpblxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMudGVtcGxhdGUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBDb21wb25lbnQgY2hpbGQgbm9kZXMuXG4gICAgICogQG1ldGhvZCByZW5kZXJcbiAgICAgKiBAbWVtYmVyb2YgRE5BLk1JWElOUy5UZW1wbGF0ZU1peGluXG4gICAgICogQGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gdHBsIEEgdGVtcGxhdGUgdG8gdXNlIGluc3RlYWQgb2YgYHRoaXMudGVtcGxhdGVgLlxuICAgICAqXG4gICAgICogQHRocm93cyB7VHlwZUVycm9yfSBXaWxsIHRocm93IGlmIHRoZSB0ZW1wbGF0ZSB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAgICovXG4gICAgcmVuZGVyKHRwbCkge1xuICAgICAgICB0cGwgPSB0cGwgfHwgdGhpcy50ZW1wbGF0ZTtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odHBsKSkge1xuICAgICAgICAgICAgdHBsLmNhbGwodGhpcyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNTdHJpbmcodHBsKSkge1xuICAgICAgICAgICAgdGhpcy5ub2RlLmlubmVySFRNTCA9IHRwbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgdGVtcGxhdGUgcHJvcGVydHkuJyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuIiwiLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLXJlc3QtcGFyYW1zICovXG5leHBvcnQgY29uc3QgcmVkdWNlID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZSB8fCBmdW5jdGlvbihjYWxsYmFjayAvKiwgaW5pdGlhbFZhbHVlKi8gKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIGxldCB0ID0gdGhpcztcbiAgICBsZXQgbGVuID0gdC5sZW5ndGg7XG4gICAgbGV0IGsgPSAwO1xuICAgIGxldCB2YWx1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICB2YWx1ZSA9IGFyZ3VtZW50c1sxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAoayA8IGxlbiAmJiAhKGsgaW4gdCkpIHtcbiAgICAgICAgICAgIGsrKztcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHRbaysrXTtcbiAgICB9XG4gICAgZm9yICg7IGsgPCBsZW47IGsrKykge1xuICAgICAgICBpZiAoayBpbiB0KSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrKHZhbHVlLCB0W2tdLCBrLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59O1xuIiwiLyoqXG4gKiBAYXV0aG9yIEp1c3RpbiBGYWduYW5pXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qdXN0aW5mYWduYW5pL21peHdpdGguanNcbiAqL1xuaW1wb3J0IHsgcmVkdWNlIH0gZnJvbSAnLi4vcG9seWZpbGxzL3JlZHVjZS5qcyc7XG5cbi8qKlxuICogTWl4IGEgY2xhc3Mgd2l0aCBhIG1peGluLlxuICogQG1ldGhvZCBtaXgoLi4uKS53aXRoKC4uLilcbiAqIEBtZW1iZXJvZiEgRE5BLlxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHN1cGVyQ2xhc3MgVGhlIGNsYXNzIHRvIGV4dGVuZC5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG1peGVkIGNsYXNzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqc1xuICogLy8gbXktc3VwZXIuanNcbiAqIGV4cG9ydCBjbGFzcyBNeVN1cGVyQ2xhc3Mge1xuICogICAgIGNvbnN0cnVjdG9yKCkge1xuICogICAgICAgICAvLyBkbyBzb21ldGhpbmdcbiAqICAgICB9XG4gKiB9XG4gKiBgYGBcbiAqIGBgYGpzXG4gKiAvLyBtaXhpbi5qc1xuICogZXhwb3J0IGNvbnN0IE1peGluID0gKHN1cGVyQ2xhc3MpID0+IGNsYXNzIGV4dGVuZCBzdXBlckNsYXNzIHtcbiAqICAgICBjb25zdHJ1Y3RvcigpIHtcbiAqICAgICAgICAgc3VwZXIoKTtcbiAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIGVsc2VcbiAqICAgICB9XG4gKiB9O1xuICogYGBgXG4gKiBgYGBqc1xuICogaW1wb3J0IHsgbWl4IH0gZnJvbSAnQGRuYWpzL2NvcmUnO1xuICogaW1wb3J0IHsgTXlTdXBlckNsYXNzIH0gZnJvbSAnLi9teS1zdXBlci5qcyc7XG4gKiBpbXBvcnQgeyBNaXhpbiB9IGZyb20gJy4vbWl4aW4uanMnO1xuICpcbiAqIGV4cG9ydCBjbGFzcyBNaXhlZENsYXNzIGV4dGVuZHMgbWl4KE15U3VwZXJDbGFzcykud2l0aChNaXhpbikge1xuICogICAgIC4uLlxuICogfVxuICogYGBgXG4gKi9cblxuLyoqXG4gKiBBIE1peGluIGhlbHBlciBjbGFzcy5cbiAqIEBpZ25vcmVcbiAqL1xuY2xhc3MgTWl4aW4ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG1peGFibGUgY2xhc3MuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3VwZXJDbGFzcyBUaGUgY2xhc3MgdG8gZXh0ZW5kLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHN1cGVyY2xhc3MpIHtcbiAgICAgICAgc3VwZXJjbGFzcyA9IHN1cGVyY2xhc3MgfHwgY2xhc3Mge307XG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IHN1cGVyY2xhc3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1peCB0aGUgc3VwZXIgY2xhc3Mgd2l0aCBhIGxpc3Qgb2YgbWl4aW5zLlxuICAgICAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IG1peGlucyAqTiogbWl4aW4gZnVuY3Rpb25zLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgZXh0ZW5kZWQgY2xhc3MuXG4gICAgICovXG4gICAgd2l0aCgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIGxldCBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgICByZXR1cm4gcmVkdWNlLmNhbGwoYXJncywgKGMsIG1peGluKSA9PiBtaXhpbihjKSwgdGhpcy5zdXBlcmNsYXNzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgTWl4aW4gaW5zdGFuY2UuXG4gKiBAaWdub3JlXG4gKi9cbmV4cG9ydCBjb25zdCBtaXggPSAoc3VwZXJDbGFzcykgPT4gbmV3IE1peGluKHN1cGVyQ2xhc3MpO1xuIiwiaW1wb3J0IHsgcmVnaXN0cnkgfSBmcm9tICcuL3JlZ2lzdHJ5LmpzJztcbmltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSAnLi90eXBlb2YuanMnO1xuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBhbHJlYWR5IGluc3RhbnRpYXRlZCBIVE1MRWxlbWVudCBmb3IgcHJvZ3JhbW1hdGljYWxseSBgY29uc3RydWN0b3JgIGNhbGxzLlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgVGhlIG5vZGUgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUaGUgbm9kZSBzaG91bGQgYmUgaW5zdGFudGlhdGVkLlxuICovXG5mdW5jdGlvbiBpc05ldyhub2RlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuICFpc1N0cmluZyhub2RlLm91dGVySFRNTCk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG4vKipcbiAqIFNoaW0gb3JpZ2luYWwgRWxlbWVudCBjb25zdHJ1Y3RvcnMgaW4gb3JkZXIgdG8gYmUgdXNlZCB3aXRoIGBuZXdgLlxuICogQG1ldGhvZCBzaGltXG4gKiBAbWVtYmVyb2YhIEROQS5cbiAqIEBzdGF0aWNcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBPcmlnaW5hbCBUaGUgb3JpZ2luYWwgY29uc3RydWN0b3IgdG8gc2hpbS5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgc2hpbW1lZCBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBganNcbiAqIC8vIHNoaW0gYXVkaW8gZWxlbWVudFxuICogaW1wb3J0IHsgc2hpbSB9IGZyb20gJ0BkbmFqcy9jb3JlJztcbiAqXG4gKiBjbGFzcyBNeUF1ZGlvIGV4dGVuZHMgc2hpbShIVE1MQXVkaW9FbGVtZW50KSB7XG4gKiAgICAgLi4uXG4gKiB9XG4gKlxuICogbGV0IGF1ZGlvID0gbmV3IE15QXVkaW8oKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hpbShPcmlnaW5hbCkge1xuICAgIGNsYXNzIFBvbHlmaWxsZWQge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIGlmICghaXNOZXcodGhpcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBkZXNjID0gcmVnaXN0cnkuZ2V0RGVzY3JpcHRvcih0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgICAgIGxldCBjb25maWcgPSBkZXNjLmNvbmZpZztcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRhZ25hbWUgb2YgdGhlIGNvbnN0cnVjdG9yIGFuZCBjcmVhdGUgYSBuZXcgZWxlbWVudCB3aXRoIGl0XG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgY29uZmlnLmV4dGVuZHMgPyBjb25maWcuZXh0ZW5kcyA6IGRlc2MuaXNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBlbGVtZW50Ll9fcHJvdG9fXyA9IGRlc2MuQ3RyLnByb3RvdHlwZTtcbiAgICAgICAgICAgIGlmIChjb25maWcuZXh0ZW5kcykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdpcycsIGRlc2MuaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2xvbmUgdGhlIHByb3RvdHlwZSBvdmVycmlkaW5nIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICBQb2x5ZmlsbGVkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT3JpZ2luYWwucHJvdG90eXBlLCB7XG4gICAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgICAgICB2YWx1ZTogUG9seWZpbGxlZCxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBQb2x5ZmlsbGVkO1xufVxuIiwiaW1wb3J0ICogYXMgRE9NX0hFTFBFUlMgZnJvbSAnLi9saWIvZG9tLmpzJztcbmltcG9ydCB7IENvbXBvbmVudE1peGluIH0gZnJvbSAnLi9taXhpbnMvY29tcG9uZW50LmpzJztcbmltcG9ydCB7IFByb3BlcnRpZXNNaXhpbiB9IGZyb20gJy4vbWl4aW5zL3Byb3BlcnRpZXMtY29tcG9uZW50LmpzJztcbmltcG9ydCB7IEV2ZW50c01peGluIH0gZnJvbSAnLi9taXhpbnMvZXZlbnRzLWNvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBTdHlsZU1peGluIH0gZnJvbSAnLi9taXhpbnMvc3R5bGUtY29tcG9uZW50LmpzJztcbmltcG9ydCB7IFRlbXBsYXRlTWl4aW4gfSBmcm9tICcuL21peGlucy90ZW1wbGF0ZS1jb21wb25lbnQuanMnO1xuXG4vKipcbiAqIEEgc2V0IG9mIERPTSBoZWxwZXJzIGZvciBjYWxsYmFja3MgdHJpZ2dlciB3aGVuIEN1c3RvbSBFbGVtZW50c1xuICogYXJlIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuXG4gKiBAbmFtZSBET01cbiAqIEBuYW1lc3BhY2UgRE9NXG4gKiBAbWVtYmVyb2YhIEROQS5cbiAqIEBzdGF0aWNcbiAqL1xuZXhwb3J0IGNvbnN0IERPTSA9IERPTV9IRUxQRVJTO1xuLyoqXG4gKiBBIHNldCBvZiBjb3JlIG1peGlucy5cbiAqIEBuYW1lIE1JWElOU1xuICogQG5hbWVzcGFjZSBNSVhJTlNcbiAqIEBtZW1iZXJvZiEgRE5BLlxuICogQHN0YXRpY1xuICovXG5leHBvcnQgY29uc3QgTUlYSU5TID0ge1xuICAgIENvbXBvbmVudE1peGluLFxuICAgIFByb3BlcnRpZXNNaXhpbixcbiAgICBFdmVudHNNaXhpbixcbiAgICBTdHlsZU1peGluLFxuICAgIFRlbXBsYXRlTWl4aW4sXG59O1xuZXhwb3J0IHsgbWl4IH0gZnJvbSAnLi9saWIvbWl4aW5zLmpzJztcbmV4cG9ydCB7IHByb3AgfSBmcm9tICcuL2xpYi9wcm9wZXJ0eS5qcyc7XG5leHBvcnQgeyBzaGltIH0gZnJvbSAnLi9saWIvc2hpbS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2xpYi9zeW1ib2xzLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vbGliL3R5cGVvZi5qcyc7XG4iLCIvKipcbiAqIEROQVxuICogKGMpIDIwMTUtMjAxNiBDaGlhbGFiIChodHRwOi8vd3d3LmNoaWFsYWIuY29tKSA8ZGV2QGNoaWFsYWIuaW8+XG4gKiBodHRwOi8vZG5hLmNoaWFsYWIuaW9cbiAqXG4gKiBKdXN0IGFub3RoZXIgY29tcG9uZW50cyBwYXR0ZXJuLlxuICogVXNlIHdpdGggQ3VzdG9tIEVsZW1lbnRzIHNwZWNzLlxuICovXG5pbXBvcnQgeyBtaXgsIHByb3AsIHNoaW0sIERPTSwgTUlYSU5TIH0gZnJvbSAnLi9zcmMvY29yZS5qcyc7XG5pbXBvcnQgeyByZWdpc3RyeSB9IGZyb20gJy4vc3JjL2xpYi9yZWdpc3RyeS5qcyc7XG5cbi8qKlxuICogQG5hbWVzcGFjZSBETkFcbiAqL1xuZXhwb3J0IHsgbWl4LCBwcm9wLCBzaGltLCBET00sIE1JWElOUyB9O1xuZXhwb3J0IHsgcmVnaXN0cnkgfTtcblxuLyoqXG4gKiBSZWdpc3RlciBhIG5ldyBjb21wb25lbnQuXG4gKiBAbWV0aG9kIGRlZmluZVxuICogQG1lbWJlcm9mISBETkEuXG4gKiBAc3RhdGljXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIGlkIG9mIHRoZSBjb21wb25lbnQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBDdHIgVGhlIGNvbXBvbmVudCBjb25zdHJ1Y3Rvci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgT3B0aW9uYWwgY29tcG9uZW50IGNvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmUodGFnTmFtZSwgQ29tcG9uZW50LCBjb25maWcpIHtcbiAgICByZXR1cm4gcmVnaXN0cnkuZGVmaW5lKHRhZ05hbWUsIENvbXBvbmVudCwgY29uZmlnKTtcbn1cbi8qKlxuICogQ3JlYXRlIGFuZCBhcHBlbmQgYSBuZXcgY29tcG9uZW50IGluc3RhbmNlLlxuICogQG1ldGhvZCByZW5kZXJcbiAqIEBtZW1iZXJvZiEgRE5BLlxuICogQHN0YXRpY1xuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgVGhlIHBhcmVudCBub2RlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gQ29tcG9uZW50IFRoZSBjb21wb25lbnQgY29uc3RydWN0b3IuXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgT3B0aW9uYWwgc2V0IG9mIHByb3BlcnRpZXMgdG8gc2V0IHRvIHRoZSBjb21wb25lbnQuXG4gKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIG5ldyBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIobm9kZSwgQ29tcG9uZW50LCBwcm9wcykge1xuICAgIGxldCBlbGVtZW50ID0gbmV3IENvbXBvbmVudCgpO1xuICAgIGZvciAobGV0IGsgaW4gcHJvcHMpIHtcbiAgICAgICAgZWxlbWVudFtrXSA9IHByb3BzW2tdO1xuICAgIH1cbiAgICBET00uYXBwZW5kQ2hpbGQobm9kZSwgZWxlbWVudCk7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbi8qKlxuICogU2ltcGxlIEN1c3RvbSBDb21wb25lbnQgd2l0aCBzb21lIGJlaGF2aW9ycy5cbiAqIEBjbGFzcyBCYXNlQ29tcG9uZW50XG4gKiBAZXh0ZW5kcyBIVE1MRWxlbWVudFxuICogQG1lbWJlcm9mIEROQS5cbiAqIEBzdGF0aWNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBganNcbiAqIC8vIG15LWNvbXBvbmVudC5qc1xuICogaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJ0BkbmFqcy9jb3JlJztcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICogICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAqICAgICByZXR1cm4gWycuLi4nLCAnLi4uJ107XG4gKiAgIH1cbiAqICAgZ2V0IGNzcygpIHtcbiAqICAgICByZXR1cm4gJy4uLic7XG4gKiAgIH1cbiAqICAgZ2V0IGV2ZW50cygpIHtcbiAqICAgICByZXR1cm4ge1xuICogICAgICAgJy4uLic6ICcuLi4nXG4gKiAgICAgfTtcbiAqICAgfVxuICogICBnZXQgdGVtcGxhdGUoKSB7XG4gKiAgICAgcmV0dXJuICcuLi4nO1xuICogICB9XG4gKiAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICogICAgIHJldHVybiB7IC4uLiB9O1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDb21wb25lbnQgZXh0ZW5kcyBtaXgoXG4gICAgc2hpbShzZWxmLkhUTUxFbGVtZW50KVxuKS53aXRoKFxuICAgIE1JWElOUy5Db21wb25lbnRNaXhpbixcbiAgICBNSVhJTlMuUHJvcGVydGllc01peGluLFxuICAgIE1JWElOUy5TdHlsZU1peGluLFxuICAgIE1JWElOUy5FdmVudHNNaXhpbixcbiAgICBNSVhJTlMuVGVtcGxhdGVNaXhpblxuKSB7fVxuIiwiaW1wb3J0IHsgRE9NIH0gZnJvbSAnQGRuYWpzL2NvcmUvc3JjL2NvcmUuanMnO1xuXG5leHBvcnQgY29uc3QgY3VzdG9tRWxlbWVudE1peGluID0gKHN1cGVyQ2xhc3MpID0+IGNsYXNzIGV4dGVuZHMgc3VwZXJDbGFzcyB7XG4gICAgY3JlYXRlZENhbGxiYWNrKCkge1xuICAgICAgICBET00uYmluZCh0aGlzKTtcbiAgICB9XG4gICAgYXR0YWNoZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgICBkZXRhY2hlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLmRldGFjaGVkQ2FsbGJhY2soKTtcbiAgICB9XG59O1xuIiwiLyoqXG4gKiBETkFcbiAqIChjKSAyMDE1LTIwMTYgQ2hpYWxhYiAoaHR0cDovL3d3dy5jaGlhbGFiLmNvbSkgPGRldkBjaGlhbGFiLmlvPlxuICogaHR0cDovL2RuYS5jaGlhbGFiLmlvXG4gKlxuICogSnVzdCBhbm90aGVyIGNvbXBvbmVudHMgcGF0dGVybi5cbiAqIFVzZSB3aXRoIEN1c3RvbSBFbGVtZW50cyB2MCBzcGVjLlxuICovXG5pbXBvcnQgeyBzaGltLCBtaXgsIE1JWElOUyB9IGZyb20gJ0BkbmFqcy9jb3JlL3NyYy9jb3JlLmpzJztcbmltcG9ydCB7IHJlZ2lzdHJ5LCBCYXNlQ29tcG9uZW50IGFzIE9yaWdpbmFsQ29tcG9uZW50IH0gZnJvbSAnQGRuYWpzL2NvcmUnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudE1peGluIH0gZnJvbSAnLi9zcmMvbWl4aW5zL2N1c3RvbS1lbGVtZW50LmpzJztcblxuTUlYSU5TLmN1c3RvbUVsZW1lbnRNaXhpbiA9IGN1c3RvbUVsZW1lbnRNaXhpbjtcblxuZXhwb3J0IHsgcHJvcCB9IGZyb20gJ0BkbmFqcy9jb3JlL3NyYy9jb3JlLmpzJztcbmV4cG9ydCB7IHNoaW0sIG1peCwgcmVnaXN0cnksIE1JWElOUyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZSh0YWdOYW1lLCBDb21wb25lbnQsIGNvbmZpZyA9IHt9KSB7XG4gICAgcmVnaXN0cnkuZGVmaW5lKHRhZ05hbWUsIENvbXBvbmVudCwgY29uZmlnKTtcbiAgICBsZXQgb3B0cyA9IHtcbiAgICAgICAgcHJvdG90eXBlOiBDb21wb25lbnQucHJvdG90eXBlLFxuICAgIH07XG4gICAgaWYgKGNvbmZpZy5leHRlbmRzKSB7XG4gICAgICAgIG9wdHMuZXh0ZW5kcyA9IGNvbmZpZy5leHRlbmRzO1xuICAgIH1cbiAgICByZXR1cm4gZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KHRhZ05hbWUsIG9wdHMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihub2RlLCBDb21wb25lbnQsIHByb3BzID0ge30pIHtcbiAgICBsZXQgZWxlbWVudCA9IG5ldyBDb21wb25lbnQoKTtcbiAgICBmb3IgKGxldCBrIGluIHByb3BzKSB7XG4gICAgICAgIGVsZW1lbnRba10gPSBwcm9wc1trXTtcbiAgICB9XG4gICAgbm9kZS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICByZXR1cm4gZWxlbWVudDtcbn1cblxuZXhwb3J0IGNsYXNzIEJhc2VDb21wb25lbnQgZXh0ZW5kcyBtaXgoT3JpZ2luYWxDb21wb25lbnQpLndpdGgoXG4gICAgY3VzdG9tRWxlbWVudE1peGluXG4pIHt9XG4iXSwibmFtZXMiOlsiaXNGdW5jdGlvbiIsIm9iaiIsImlzU3RyaW5nIiwiaXNPYmplY3QiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJpc1VuZGVmaW5lZCIsImlzQXJyYXkiLCJBcnJheSIsInJlZ2lzdHJ5IiwibmFtZSIsIkN0ciIsImNvbmZpZyIsImNvbXBvbmVudHMiLCJ0b0xvd2VyQ2FzZSIsImsiLCJkZXNjIiwiZ2V0RGVzY3JpcHRvciIsIkNPTVBPTkVOVF9TWU1CT0wiLCJDT05ORUNURUQiLCJESVNDT05ORUNURUQiLCJVUERBVEVEIiwiZ2V0Q29tcG9uZW50IiwiZWxlbWVudCIsImZ1bGwiLCJub2RlIiwibm9kZVR5cGUiLCJOb2RlIiwiRUxFTUVOVF9OT0RFIiwiZ2V0QXR0cmlidXRlIiwidGFnTmFtZSIsImdldCIsImlzQ29tcG9uZW50IiwiY29ubmVjdCIsImRpc2Nvbm5lY3QiLCJ1cGRhdGUiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwiYmluZCIsIl9fcHJvdG9fXyIsImRlZmluZVByb3BlcnR5IiwiY3JlYXRlRWxlbWVudCIsImlzIiwiYXBwZW5kQ2hpbGQiLCJwYXJlbnQiLCJwYXJlbnROb2RlIiwibGFzdEVsZW1lbnRDaGlsZCIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwicmVmTm9kZSIsIm5leHRTaWJsaW5nIiwicmVwbGFjZUNoaWxkIiwic2V0QXR0cmlidXRlIiwidmFsdWUiLCJhdHRycyIsImNvbnN0cnVjdG9yIiwib2JzZXJ2ZWRBdHRyaWJ1dGVzIiwiaW5kZXhPZiIsInJlbW92ZUF0dHJpYnV0ZSIsIkNvbXBvbmVudE1peGluIiwiU3VwZXJDbGFzcyIsImNvbm5lY3RlZENhbGxiYWNrIiwiZGlzY29ubmVjdGVkQ2FsbGJhY2siLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siLCJsb2NhbE5hbWUiLCJDdXN0b21FdmVudCIsImV2Iiwic2VsZiIsImV4IiwiZXZlbnQiLCJwYXJhbXMiLCJ1bmRlZmluZWQiLCJldnQiLCJkb2N1bWVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJkaXNwYXRjaCIsImV2TmFtZSIsImRhdGEiLCJUeXBlRXJyb3IiLCJkaXNwYXRjaEV2ZW50IiwiZGVmaW5lIiwiUHJvcGVydHkiLCJjdHJzIiwiXyIsInZhbGlkYXRvciIsIl9zZXR0ZXIiLCJ2YWwiLCJnZXR0ZXJGbiIsInNldHRlckZuIiwidmFsaWRhdGVUeXBlIiwiY2hhbmdlZCIsInNjb3BlIiwib2JzZXJ2ZSIsImNhbGxiYWNrIiwicHVzaCIsInVub2JzZXJ2ZSIsImlvIiwic3BsaWNlIiwiaSIsImxlbiIsImxlbmd0aCIsImNsYiIsImFjY2VwdHMiLCJuYW1lZCIsImF0dHJSZXF1ZXN0ZWQiLCJhdHRyTmFtZSIsImRlZmF1bHQiLCJpbml0VmFsdWUiLCJkZWZhdWx0VmFsdWUiLCJmcmVlemUiLCJhdHRyaWJ1dGUiLCJldmVudE5hbWUiLCJnZXR0ZXIiLCJzZXR0ZXIiLCJ2YWxpZGF0ZSIsImluaXQiLCJwcm9wIiwiU3RyaW5nIiwiQm9vbGVhbiIsIk51bWJlciIsImdldFZhbHVlIiwicHJvcGVydHkiLCJhdHRyVmFsIiwiSlNPTiIsInBhcnNlIiwiY29udGV4dCIsImF0dHIiLCJjdXJyZW50QXR0clZhbHVlIiwiUHJvcGVydGllc01peGluIiwicHJvcHMiLCJwcm9wZXJ0aWVzIiwicmVkdWNlIiwicmVzIiwicGFydGlhbFByb3BzIiwib2JzZXJ2ZWQiLCJoYXNBdHRyaWJ1dGUiLCJvbGRWYWwiLCJuZXdWYWwiLCJvYnNlcnZlUHJvcGVydHkiLCJwcm9wTmFtZSIsInVub2JzZXJ2ZVByb3BlcnR5IiwiRUxFTV9QUk9UTyIsIkVsZW1lbnQiLCJtYXRjaGVzIiwibWF0Y2hlc1NlbGVjdG9yIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwiU1BMSVRfU0VMRUNUT1IiLCJFdmVudHNNaXhpbiIsImV2ZW50cyIsInJ1bGUiLCJtYXRjaCIsInNlbGVjdG9yIiwidHJpbSIsImRlbGVnYXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsInRyaWdnZXIiLCJyb290RG9jIiwiY3JlYXRlU3R5bGUiLCJkb2MiLCJvd25lckRvY3VtZW50Iiwic3R5bGVFbGVtIiwidHlwZSIsImhlYWQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIlN0eWxlTWl4aW4iLCJ1cGRhdGVDU1MiLCJjbGFzc0xpc3QiLCJhZGQiLCJzdHlsZSIsImNzcyIsInRleHRDb250ZW50IiwiVGVtcGxhdGVNaXhpbiIsImF1dG9SZW5kZXIiLCJ0ZW1wbGF0ZSIsInJlbmRlciIsInRwbCIsImlubmVySFRNTCIsInQiLCJhcmd1bWVudHMiLCJNaXhpbiIsInN1cGVyY2xhc3MiLCJ3aXRoIiwiYXJncyIsInNsaWNlIiwiYyIsIm1peGluIiwibWl4Iiwic3VwZXJDbGFzcyIsImlzTmV3Iiwib3V0ZXJIVE1MIiwic2hpbSIsIk9yaWdpbmFsIiwiUG9seWZpbGxlZCIsImV4dGVuZHMiLCJjcmVhdGUiLCJET00iLCJET01fSEVMUEVSUyIsIk1JWElOUyIsIkJhc2VDb21wb25lbnQiLCJIVE1MRWxlbWVudCIsImN1c3RvbUVsZW1lbnRNaXhpbiIsImNyZWF0ZWRDYWxsYmFjayIsImF0dGFjaGVkQ2FsbGJhY2siLCJkZXRhY2hlZENhbGxiYWNrIiwiQ29tcG9uZW50Iiwib3B0cyIsInJlZ2lzdGVyRWxlbWVudCIsIk9yaWdpbmFsQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7Ozs7O0FBU0EsQUFBTyxTQUFTQSxVQUFULENBQW9CQyxHQUFwQixFQUF5QjtTQUNyQixPQUFPQSxHQUFQLEtBQWUsVUFBdEI7Ozs7Ozs7Ozs7O0FBV0osQUFBTyxTQUFTQyxRQUFULENBQWtCRCxHQUFsQixFQUF1QjtTQUNuQixPQUFPQSxHQUFQLEtBQWUsUUFBdEI7Ozs7Ozs7Ozs7O0FBV0osQUFBTyxTQUFTRSxRQUFULENBQWtCRixHQUFsQixFQUF1QjtTQUNuQkcsT0FBT0MsU0FBUCxDQUFpQkMsUUFBakIsQ0FBMEJDLElBQTFCLENBQStCTixHQUEvQixNQUF3QyxpQkFBL0M7Ozs7Ozs7Ozs7O0FBV0osQUFBTyxTQUFTTyxXQUFULENBQXFCUCxHQUFyQixFQUEwQjtTQUN0QixPQUFPQSxHQUFQLEtBQWUsV0FBdEI7Ozs7Ozs7Ozs7O0FBV0osQUFBTyxTQUFTUSxPQUFULENBQWlCUixHQUFqQixFQUFzQjtTQUNsQlMsTUFBTUQsT0FBTixDQUFjUixHQUFkLENBQVA7OztBQ3hESjs7Ozs7Ozs7QUFRQSxBQUFPLElBQU1VLFdBQVc7Ozs7O2dCQUtSLEVBTFE7Ozs7Ozs7VUFBQSxrQkFZYkMsSUFaYSxFQVlQQyxHQVpPLEVBWVc7WUFBYkMsTUFBYSx1RUFBSixFQUFJOzthQUN0QkMsVUFBTCxDQUFnQkgsS0FBS0ksV0FBTCxFQUFoQixJQUFzQztnQkFDOUJKLElBRDhCO29CQUFBOztT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"}