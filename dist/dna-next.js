!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.DNA=a.DNA||{})}(this,function(a){"use strict";function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function c(a,c,d){return c&&b(a.prototype,c),d&&b(a,d),a}function d(a){var b=void 0;return a.name&&(b=a.name.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}).replace(/^\-/,"")),b}function e(a,b){var c=void 0;if(a){c=Object.getOwnPropertyDescriptor(a,b);var d=Object.getPrototypeOf(a);!c&&d&&(c=e(d,b))}return c}function f(a,b,c){var d="function"==typeof b.get,e="__"+a,f=function(){var a=void 0;return a=d?b.get.call(this):"undefined"!=typeof this[e]?this[e]:c};return d||(f.bind=e),f}function g(a,b,c){if(b&&b.set&&b.set.callbacks)return b.set.callbacks.push(c),b.set;var d=function e(c){var d=this;b.set?b.set.call(this,c):this["__"+a]=c;var f=this[a];return e.callbacks.forEach(function(b){"function"==typeof b&&b.call(d,a,f)}),f};return d.callbacks=[c],d}function h(a){return a.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}function i(a){return a.replace(/\W+(.)/g,function(a,b){return b.toUpperCase()})}function j(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=void 0,e={},f=void 0;return"string"==typeof a?(f=a,"function"==typeof b?(c=b,e={}):("object"==typeof b&&(e=b),"undefined"!=typeof e.prototype&&(c=e.prototype))):(c=a,"object"==typeof b&&(e=b)),"function"==typeof c?(f=f||e.tagName||c.hasOwnProperty("tagName")&&c.tagName||d(c),e.prototype=c.prototype,e["extends"]||"string"!=typeof c["extends"]||(e["extends"]=c["extends"])):"object"==typeof c&&(e.prototype=c,c=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];e.prototype.constructor.apply(this,b)},c.prototype=e.prototype),e.prototype&&(e.prototype=Object.create(e.prototype)),{tagName:f,config:e,scope:c}}function k(a,b){var c=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],d=arguments[3],e=arguments.length<=4||void 0===arguments[4]?[]:arguments[4];Object.getOwnPropertyNames(b).filter(function(a){return-1===C.indexOf(a)}).forEach(function(h){var i=Object.getOwnPropertyDescriptor(b,h)||{},j="function"==typeof i.value;-1===e.indexOf(h)&&("undefined"!=typeof i.value&&j?j&&c&&(e.push(h),Object.defineProperty(a,h,i)):(e.push(h),i.configurable!==!1&&Object.defineProperty(a,h,{configurable:!0,get:f(h,i,i.value),set:g(h,i,d)})))});var h=b.prototype||Object.getPrototypeOf(b);h&&h!==HTMLElement.prototype&&k(a,h,c,d,e)}function l(a,b){if(a){var c=a.toLowerCase();return b&&(D[c]=b),D[c]}return null}function m(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=j(a,b),d=c.scope,e=c.tagName,f=c.config;"function"==typeof d.onRegister&&d.onRegister.call(d,e);var g=function(a){return a=a||document.createElement(f["extends"]?f["extends"]:e),k(a,d.prototype),Object.defineProperty(a,"is",{configurable:!1,get:function(){return e}}),a.createdCallback(),a};return Object.defineProperty(g.prototype,"constructor",{configurable:!1,get:function(){return d}}),l(e,g),g}function n(a,b,c){var d=a.getAttribute(b);null!==c&&void 0!==c&&c!==!1?"string"!=typeof c&&"number"!=typeof c||d===c?"boolean"==typeof c&&""!==d&&a.setAttribute(b,""):a.setAttribute(b,c):(d||""===d)&&a.removeAttribute(b)}function o(a,b){var c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||function(a){return-1!==[].indexOf.call(document.querySelectorAll(a),this)};return c.call(a,b)}function p(a,b,c,d){a.addEventListener(b,function(b){for(var e=b.target;e&&e!==a;){if(o(e,c))return void d.call(a,b,e);e=e.parentNode}})}function q(a){return"__"+a+"Callbacks"}function r(a,b,c){var d=a;if("function"!=typeof d&&(d=l(a.is).prototype.constructor),!d)return!1;var e=q(b),f=Object.getPrototypeOf(d),g=d[e]||f&&f[e];if(g&&Array.isArray(g))for(var h=0,i=g.length;i>h;h++)g[h].apply(a,c);return!0}function s(a,b){for(;b;){var c=e(b,a);if(c)return!0;b=b.prototype}return!1}function t(a,b){if(Array.isArray(b))for(var c=0;c<b.length;c++)t(a,b[c]);else{var d=function(){if(a.__attachedBehaviors=a.__attachedBehaviors||[],-1!==a.__attachedBehaviors.indexOf(b))return{v:void 0};Array.isArray(b.behaviors)&&t(a,b.behaviors);for(var c=K,d=[],e=b;e&&e!==A;)Object.getOwnPropertyNames(e).forEach(function(a){-1===d.indexOf(a)&&-1===C.indexOf(a)&&d.push(a)}),e=Object.getPrototypeOf(e);d.forEach(function(d){if(-1!==c.indexOf(d)){var e=q(d);a[e]=a[e]||[],a[e].push(b[d])}else d in a||(a[d]=b[d])}),b.prototype&&!function(){for(var d=[],e=b.prototype||Object.getPrototypeOf(b);e&&e!==A.prototype;)Object.getOwnPropertyNames(e).forEach(function(a){-1===d.indexOf(a)&&d.push(a)}),e=e.prototype||Object.getPrototypeOf(e);d.forEach(function(d){if(-1!==c.indexOf(d)){var e=q(d);a[e]=a[e]||[],a[e].push(b.prototype[d])}else s(d,a.prototype)||(a.prototype[d]=b.prototype[d])})}(),a.__attachedBehaviors.push(b)}();if("object"==typeof d)return d.v}}var u=!0,v=Object.freeze({autoUpdateView:u}),w=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},x=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},y=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)};if("function"!=typeof HTMLElement){var z=function(){};z.prototype=HTMLElement.prototype,HTMLElement=z}var A=function(a){function b(){return w(this,b),x(this,Object.getPrototypeOf(b).apply(this,arguments))}return y(b,a),c(b,[{key:"createdCallback",value:function(){}},{key:"attachedCallback",value:function(){}},{key:"detachedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(){}}],[{key:"onRegister",value:function(){}}]),b}(HTMLElement),B=function S(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:S(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},C=["name","length","prototype","arguments","caller","constructor"],D={},E={},F=function(a){function b(){return w(this,b),x(this,Object.getPrototypeOf(b).apply(this,arguments))}return y(b,a),c(b,[{key:"createdCallback",value:function(){B(Object.getPrototypeOf(b.prototype),"createdCallback",this).call(this);for(var a=Array.prototype.slice.call(this.attributes||[],0),c=E[this.is]||[],d=0,e=a.length;e>d;d++){var f=a[d],g=i(f.name);if(-1!==c.indexOf(g)){var h=f.value;if(this.removeAttribute(f.name),""===h)this[g]=!0;else try{this[g]=JSON.parse(h)}catch(j){this[g]=h}}}}}],[{key:"onRegister",value:function(a){var b=this,c=this.properties||[];E[a]=c,c.forEach(function(a){var c=e(b.prototype,a)||{};Object.defineProperty(b.prototype,a,{configurable:!0,get:f(a,c),set:g(a,c)})})}}]),b}(A),G={},H=function(a){function b(){return w(this,b),x(this,Object.getPrototypeOf(b).apply(this,arguments))}return y(b,a),c(b,[{key:"createdCallback",value:function(){var a=this;B(Object.getPrototypeOf(b.prototype),"createdCallback",this).call(this);for(var c=this.attributes||[],d=0,e=c.length;e>d;d++){var f=c[d];this.attributeChangedCallback(f.name,void 0,f.value)}var g=G[this.is]||[];g.forEach(function(b){n(a,h(b),a[b])})}},{key:"attributeChangedCallback",value:function(a,c,d){B(Object.getPrototypeOf(b.prototype),"attributeChangedCallback",this).call(this,a,c,d);var e=G[this.is];if(e&&Array.isArray(e)){var f=i(a);-1!==e.indexOf(f)&&(""===d&&(d=!0),d!==this[f]&&(this[f]=d))}}}],[{key:"onRegister",value:function(a){var b=this,c=this.attributes||[];G[a]=c.map(function(a){var c=i(a),d=e(b.prototype,c)||{};return Object.defineProperty(b.prototype,c,{configurable:!0,get:f(c,d),set:g(c,d,function(a,b){var c=h(a);n(this,c,b)})}),c})}}]),b}(A),I={},J=function(a){function b(){return w(this,b),x(this,Object.getPrototypeOf(b).apply(this,arguments))}return y(b,a),c(b,[{key:"createdCallback",value:function(){var a=this,c=I[this.is];if(c)for(var d in c)c.hasOwnProperty(d)&&!function(){var b="string"==typeof c[d]?a[c[d]]:c[d];if(b&&"function"==typeof b){var e=d.split(" "),f=e.shift(),g=e.join(" ");g?p(a,f,g,function(c,d){b.call(a,c,d)}):a.addEventListener(f,function(c){b.call(a,c,a)})}}();B(Object.getPrototypeOf(b.prototype),"createdCallback",this).call(this)}},{key:"trigger",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],d=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];if(!a)throw new Error("Event name is undefined");var e=document.createEvent("Event");return"undefined"!=typeof e.initEvent&&e.initEvent(a,c,d),b&&(e.detail=b),this.dispatchEvent(e)}}],[{key:"onRegister",value:function(a){I[a]=this.events}}]),b}(A),K=["onRegister","createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"],L=function(a){function b(){return w(this,b),x(this,Object.getPrototypeOf(b).apply(this,arguments))}return y(b,a),c(b,[{key:"createdCallback",value:function(){B(Object.getPrototypeOf(b.prototype),"createdCallback",this).call(this),r(this,"createdCallback")}},{key:"attachedCallback",value:function(){B(Object.getPrototypeOf(b.prototype),"attachedCallback",this).call(this),r(this,"attachedCallback")}},{key:"detachedCallback",value:function(){B(Object.getPrototypeOf(b.prototype),"detachedCallback",this).call(this),r(this,"detachedCallback")}},{key:"attributeChangedCallback",value:function(a,c,d){B(Object.getPrototypeOf(b.prototype),"attributeChangedCallback",this).call(this,a,c,d),r(this,"attributeChangedCallback",[a,c,d])}}],[{key:"onRegister",value:function(){for(var a=this,b=this,c=arguments.length,d=Array(c),e=0;c>e;e++)d[e]=arguments[e];A.onRegister.apply(this,d),K.forEach(function(b){var c=q(b);a[c]=[]});var f=this.behaviors||[];return t(this,f),r(this,"onRegister",d),delete this.__attachedBehaviors,b}}]),b}(A),M=function(a){function b(){return w(this,b),x(this,Object.getPrototypeOf(b).apply(this,arguments))}return y(b,a),c(b,[{key:"createdCallback",value:function(){B(Object.getPrototypeOf(b.prototype),"createdCallback",this).call(this);var a=this.is||this.getAttribute("is")||this.tagName.toLowerCase();a&&this.classList.add(a)}}],[{key:"onRegister",value:function(a){this.css&&this.addCss(a,this.css)}},{key:"addCss",value:function(a,b){var c=b;"function"==typeof b&&(c=b()),a="style-"+a;var d=document.getElementById(a)||document.createElement("style");if(d.type="text/css",d.setAttribute("id",a),d.innerHTML="",d.appendChild(document.createTextNode(c)),!d.parentNode){var e=document.head;e.firstElementChild?e.insertBefore(d,e.firstElementChild):e.appendChild(d)}return d}}]),b}(A),N={},O=function(a){function b(){return w(this,b),x(this,Object.getPrototypeOf(b).apply(this,arguments))}return y(b,a),c(b,[{key:"createdCallback",value:function(){var a=l(this.is).prototype.constructor;if(a.autoUpdateView){var c=a.prototype||Object.getPrototypeOf(a);k(this,c,!1,function(){this.templateReady&&this.updateViewContent()})}B(Object.getPrototypeOf(b.prototype),"createdCallback",this).call(this),this.templateReady=!0,this.updateViewContent()}},{key:"getViewContent",value:function(){var a=null;if("function"==typeof this.render&&(a=this.render(),null!==a)){if(a instanceof Node||a instanceof DocumentFragment){var b=document.createElement("div");b.appendChild(a),a=b.innerHTML}a=a.replace(/[\n\r\t]/g,"").replace(/\s+/g," ")}return a}},{key:"updateViewContent",value:function(){var a=this.getViewContent();null!==a&&(this.innerHTML=a)}},{key:"render",value:function(){var a=N[this.is];if("function"==typeof a)return a.call(this);if("string"==typeof a)return a;if(a instanceof Node&&"TEMPLATE"===a.tagName){if("function"!=typeof document.importNode||"undefined"==typeof HTMLTemplateElement)throw new Error("Template element is not supported by the browser");return document.importNode(a.content,!0)}return null}}],[{key:"onRegister",value:function(a){this.hasOwnProperty("template")&&(N[a]=this.template)}},{key:"autoUpdateView",value:function(){return u}}]),b}(A),P=function(a){function b(){return w(this,b),x(this,Object.getPrototypeOf(b).apply(this,arguments))}return y(b,a),c(b,null,[{key:"behaviors",get:function(){return[M,J,F,H,O]}}]),b}(L),Q=v,R='1.3.0'||"dev";a.Config=Q,a.Version=R,a.register=m,a.registry=l,a.REGISTRY=D,a.DNAComponent=A,a.DNAPropertiesComponent=F,a.DNAAttributesComponent=H,a.DNAEventsComponent=J,a.DNAMixedComponent=L,a.DNAStyleComponent=M,a.DNATemplateComponent=O,a.DNABaseComponent=P});