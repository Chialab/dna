!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.DNA=a.DNA||{})}(this,function(a){"use strict";function b(a){return a.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}function c(a){return a.replace(/\W+(.)/g,function(a,b){return b.toUpperCase()})}function d(a,b,c){var d=a.getAttribute(b);if(d!==c)if(null!==c&&void 0!==c&&c!==!1){var e=typeof c;"string"===e||"number"===e?a.setAttribute(b,c):"boolean"===e&&a.setAttribute(b,"")}else(d||""===d)&&a.removeAttribute(b)}function e(a){return/\{\s*\[native code\]\s*\}/.test(""+a)}function f(a,b){return a&&(Object.getOwnPropertyDescriptor(a,b)||f(Object.getPrototypeOf(a),b))}function g(a,b,c){return function(){return"function"!=typeof b.get||e(b.get)?"function"==typeof c?c.call(this,a):c:b.get.call(this)}}function h(a,b,c){return function(d){return"function"!=typeof b.set||e(b.set)?c.call(this,a,d):b.set.call(this,d)}}function i(a,b){var c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||function(a){return[].indexOf.call(document.querySelectorAll(a),this)!==-1};return c.call(a,b)}function j(a,b,c,d){a.addEventListener(b,function(b){for(var e=b.target;e&&e!==a;){if(i(e,c)&&d.call(a,b,e)===!1)return;e=e.parentNode}})}function k(a){var b=document.createElement("style");return b.type="text/css",b.setAttribute("id",a),b}function l(a,b){var c="";Array.isArray(b)||(b=[b]),b.forEach(function(a){"function"==typeof a&&(a=a()),c+=a}),a="style-"+a;var d=document.getElementById(a)||k(a);if(d.innerHTML="",d.appendChild(document.createTextNode(c)),!d.parentNode){var e=document.head;e.firstElementChild?e.insertBefore(d,e.firstElementChild):e.appendChild(d)}return d}function m(a,b,c){b.$observe(c,function(b,d){a.attributeChangedCallback(c,d,b)})}function n(a,b){var d={restrict:"E"};return d.controller=["$scope","$element","$attrs",function(c,d,e){var f=d[0];Object.setPrototypeOf(f,b.prototype),f.is=a,f.$scope=c,f.$element=d,f.$attrs=e,f.constructor(),f.connectedCallback(),c.$on("$destroy",function(){f.disconnectedCallback()});var g=b.observedAttributes||[];Array.isArray(g)&&g.forEach(function(a){m(f,e,a)})}],K.directive(c(a),function(){return d})}var o=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){return new r(a)},r=function(){function a(b){o(this,a),this.superclass=b}return p(a,[{key:"with",value:function(){return Array.from(arguments).reduce(function(a,b){return b(a)},this.superclass)}}]),a}(),s=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},t=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},u=function(a){function b(){return o(this,b),s(this,Object.getPrototypeOf(b).apply(this,arguments))}return t(b,a),p(b,[{key:"connectedCallback",value:function(){}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(){}}]),b}(HTMLElement),v=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},w=function(){function a(){o(this,a)}return p(a,null,[{key:"get",value:function(b,c){var d=a.map.get(b)||{};return d[c]}},{key:"set",value:function(b,c,d){var e=arguments.length<=3||void 0===arguments[3]||arguments[3],f=a.map.get(b)||{},g=f[c];return g!==d&&(f[c]=d,a.map.set(b,f),e&&this.changed(b,c,g,d)),b[c]}},{key:"delete",value:function(b,c){var d=arguments.length<=2||void 0===arguments[2]||arguments[2],e=a.map.get(b)||{};if(e.hasOwnProperty(c)){var f=e[c];delete e[c],a.map.set(b,e),d&&this.changed(b,c,f,void 0)}}},{key:"observe",value:function(b,c,d){"function"==typeof c&&(d=c,c=a.GENERIC_OBSERVER);var e=a.callbacks.get(b)||{};e[c]=e[c]||[],e[c].push(d),a.callbacks.set(b,e);var f=e[c].length-1;return{cancel:function(){e[c]=e[c]||[],e[c][f]=null,a.callbacks.set(b,e)}}}},{key:"changed",value:function(b,c,d,e){var f=a.callbacks.get(b)||{},g=(f[c]||[]).some(function(a){return"function"==typeof a&&a.call(b,c,d,e)===!1});g||(f[a.GENERIC_OBSERVER]||[]).some(function(a){return"function"==typeof a&&a.call(b,c,d,e)===!1})}},{key:"GENERIC_OBSERVER",get:function(){return"-1"}}]),a}();w.map=new WeakMap,w.callbacks=new WeakMap;var x=function(a){return function(a){function e(){o(this,e);var a=s(this,Object.getPrototypeOf(e).call(this)),i=a.constructor,j=i.observedProperties||[],k=i.observedAttributes||[];j.forEach(function(c){var e=f(i.prototype,c)||{};Object.defineProperty(a,c,{configurable:!0,get:g(c,e,function(b){return a.getProperty(b)}),set:h(c,e,function(b,c){return a.setProperty(b,c)})});var j=b(c);k.indexOf(j)!==-1&&a.observeProperty(c,function(b,c,e){return d(a,j,e)})});for(var l=Array.prototype.slice.call(a.attributes||[],0),m=0,n=l.length;m<n;m++){var p=l[m],q=c(p.name);a.attributeChangedCallback(p.name,void 0,p.value),j.indexOf(q)!==-1&&k.indexOf(p.name)===-1&&a.removeAttribute(p.name)}return a}return t(e,a),p(e,[{key:"attributeChangedCallback",value:function(a,b,d){v(Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,a,b,d);var f=this.constructor,g=f.observedProperties||[],h=c(a);if(g.indexOf(h)!==-1)try{this[h]=""===d||JSON.parse(d)}catch(a){this[h]=d}}},{key:"getProperty",value:function(a){return w.get(this,a)}},{key:"setProperty",value:function(a,b){return w.set(this,a,b)}},{key:"observeProperty",value:function(a,b){return w.observe(this,a,b)}},{key:"observeProperties",value:function(a){return w.observe(this,a)}}]),e}(a)},y=function(a){function b(){return o(this,b),s(this,Object.getPrototypeOf(b).apply(this,arguments))}return t(b,a),b}(q(u).with(x)),z=function(a){return function(a){function b(){o(this,b);var a=s(this,Object.getPrototypeOf(b).call(this)),c=a.constructor.events||{};for(var d in c)c.hasOwnProperty(d)&&!function(){var b="string"==typeof c[d]?a[c[d]]:c[d];if("function"==typeof b){var e=d.match(/([^\s]+)(.*)?/),f=e[1],g=(e[2]||"").trim();g?j(a,f,g,function(c,d){b.call(a,c,d)}):a.addEventListener(f,function(c){b.call(a,c,a)})}}();return a}return t(b,a),p(b,[{key:"trigger",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]||arguments[2],d=arguments.length<=3||void 0===arguments[3]||arguments[3];if(!a)throw new Error("Event name is undefined");var e=document.createEvent("Event");return"undefined"!=typeof e.initEvent&&e.initEvent(a,c,d),b&&(e.detail=b),this.dispatchEvent(e)}}]),b}(a)},A=function(a){function b(){return o(this,b),s(this,Object.getPrototypeOf(b).apply(this,arguments))}return t(b,a),b}(q(u).with(z)),B=new WeakMap,C=function(a){return function(a){function b(){o(this,b);var a=s(this,Object.getPrototypeOf(b).call(this));if(a.is){var c=a.constructor,d=c.css;d&&!B.get(c)&&(l(a.is,d),B.get(c,!0)),a.classList.add(a.is)}return a}return t(b,a),b}(a)},D=function(a){function b(){return o(this,b),s(this,Object.getPrototypeOf(b).apply(this,arguments))}return t(b,a),b}(q(u).with(C)),E=new WeakMap,F=function(a){return function(a){function b(){o(this,b);var a=s(this,Object.getPrototypeOf(b).call(this)),c=a.constructor;return c&&c.hasOwnProperty("template")&&(w.observe(a,function(){E.get(c)&&a.render()}),E.set(c,!0),a.render()),a}return t(b,a),p(b,[{key:"render",value:function(a){return a=a||this.constructor.template,"function"==typeof a&&(a=a.call(this)),"string"==typeof a?(this.innerHTML=a,Promise.resolve()):Promise.reject()}}]),b}(a)},G=function(a){function b(){return o(this,b),s(this,Object.getPrototypeOf(b).apply(this,arguments))}return t(b,a),b}(q(u).with(F)),H=q(u).with(x,C,z,F),I=function(a){function b(){return o(this,b),s(this,Object.getPrototypeOf(b).apply(this,arguments))}return t(b,a),b}(H),J='2.0.0-beta2'||"dev",K=window.angular.module("dna-components",[]);a.register=n,a.Version=J,a.mix=q,a.BaseComponent=I,a.DNAProperty=w,a.DNAComponent=u,a.DNAPropertiesMixin=x,a.DNAPropertiesComponent=y,a.DNAEventsMixin=z,a.DNAEventsComponent=A,a.DNAStyleMixin=C,a.DNAStyleComponent=D,a.DNATemplateMixin=F,a.DNATemplateComponent=G,a.DNABaseComponent=I,Object.defineProperty(a,"__esModule",{value:!0})});